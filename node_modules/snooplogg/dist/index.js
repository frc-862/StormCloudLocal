"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.createInstanceWithDefaults = createInstanceWithDefaults;
exports.StripColors = exports.StdioStream = exports.SnoopLogg = exports.Logger = exports.Format = exports.default = void 0;

require("source-map-support/register");

var _bryt = _interopRequireDefault(require("bryt"));

var _chalk = _interopRequireDefault(require("chalk"));

var _nanobuffer = _interopRequireDefault(require("nanobuffer"));

var _supportsColor = _interopRequireDefault(require("supports-color"));

var _util = _interopRequireDefault(require("util"));

var _console = require("console");

var _stream = require("stream");

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

/**
 * The secret sauce.
 */
class Functionator extends Function {
  constructor(fn) {
    return Object.setPrototypeOf(fn, new.target.prototype);
  }

}
/**
 * Contains a namespaced logger. The actual log functions are defined on the Logger's prototype.
 *
 * Note that this is for internal use only and should not used publicly.
 */


class Logger extends Functionator {
  /**
   * Constructs a new logger instance.
   *
   * @param {?String} [namespace] - The name for this logger instance.
   * @param {?Logger} [parent] - The parent logger.
   * @param {?SnoopLogg} [root] - A reference to the top-level SnoopLogg instance.
   * @param {?String} [style] - The style for this namespace. Ultimately it's up to the theme as
   * to how the namespace is styled.
   * @access public
   */
  constructor(namespace, parent = null, root = null, style = null) {
    const ns = !namespace ? [] : (parent && parent._ns || []).concat(namespace);
    super(namespace => {
      if (!this._namespaces[namespace]) {
        this._namespaces[namespace] = bind(Object.setPrototypeOf(new Logger(namespace, this, this._root, style), this._root.proto));
      }

      return this._namespaces[namespace];
    });
    Object.defineProperties(this, {
      /**
       * The actual log namespace used for filtering. Namespaces are separated by a colon (:).
       * @type {String}
       */
      _namespace: {
        writable: true,
        value: ns.join(':')
      },

      /**
       * A map of namespaces under this logger.
       * @type {Object}
       */
      _namespaces: {
        value: {}
      },

      /**
       * The style for the namespace. This value is either manually specified or automatically
       * chosen.
       * @type {String}
       */
      _namespaceStyle: {
        value: style
      },

      /**
       * An array of namespaces to make it easier when constructing a new namespace's name.
       * @type {Array.<String>}
       */
      _ns: {
        writable: true,
        value: ns
      },

      /**
       * A reference to the parent logger. Used to construct the namespace.
       * @type {?Logger}
       */
      _parent: {
        writable: true,
        value: parent
      },

      /**
       * A reference to the top-level SnoopLogg instance.
       * @type {?SnoopLogg}
       */
      _root: {
        value: root || this
      }
    });
  }
  /**
   * Creates a `console` object that is wired up to this snooplogg instance.
   *
   * @type {Console}
   * @access public
   */


  get console() {
    if (!this._console) {
      this._console = new _console.Console(this.createStream({
        type: 'error',
        fd: 2
      }), this.createStream({
        type: 'log',
        fd: 1
      }));
    }

    return this._console;
  }
  /**
   * Creates a writable stream that when written to will write to this logger.
   *
   * @param {Object} [opts] - Various options.
   * @param {Number} [opts.fd] - The file descriptor to pass along with the log message.
   * @param {String} [opts.type] - The name of the type of messages being logged to this stream.
   * @returns {Writable}
   * @access public
   */


  createStream({
    fd,
    type
  } = {}) {
    return new StdioDispatcher(this, {
      type,
      fd,
      ns: this._namespace,
      nsStyle: this._namespaceStyle,
      enabled: this.enabled
    });
  }
  /**
   * Determines if this logger is enabled based on the pattern set by SnoopLogg's `enable()`.
   * @type {Boolean}
   * @access public
   */


  get enabled() {
    return this._root.isEnabled(this._namespace);
  }
  /**
   * The fully resolved namespace including parent namespaces.
   * @type {?String}
   * @access public
   */


  get namespace() {
    return this._namespace || null;
  }

}
/**
 * Defines the global logger instance which added additional public APIs for configuration and
 * features.
 */


exports.Logger = Logger;

class SnoopLogg extends Logger {
  /**
   * Generates a namespaced logger class with the `SnoopLogg` prototype and initializes its
   * properties.
   *
   * @param {Object} [opts] - Various config options.
   * @access public
   */
  constructor(opts) {
    if (opts !== undefined && (!opts || typeof opts !== 'object')) {
      throw new TypeError('Expected options to be an object');
    }

    super();
    Object.defineProperties(this, {
      /**
       * A regex pattern of namespaces to match or the string `*` to allow all namespaces.
       * @type {RegExp|String|null}
       */
      _allow: {
        writable: true,
        value: null
      },

      /**
       * A cache of hashes to auto-selected colors.
       * @type {Object}
       */
      _autoCache: {
        writable: true,
        value: {}
      },

      /**
       * The log message buffer.
       * @type {Array.<Object>}
       */
      _buffer: {
        writable: true,
        value: new _nanobuffer.default(process.env.SNOOPLOGG_MAX_BUFFER_SIZE !== undefined ? Math.max(0, parseInt(process.env.SNOOPLOGG_MAX_BUFFER_SIZE)) : 0)
      },

      /**
       * An array of available colors to choose from when rendering auto-styled labels such
       * as the namespace.
       * @type {Array.<String>}
       */
      _colors: {
        writable: true,
        value: process.env.SNOOPLOGG_COLOR_LIST ? process.env.SNOOPLOGG_COLOR_LIST.split(',') : []
      },

      /**
       * The default theme to apply if a stream didn't specify one.
       * @type {String}
       */
      _defaultTheme: {
        writable: true,
        value: process.env.SNOOPLOGG_DEFAULT_THEME || 'standard'
      },

      /**
       * A lazy unique identifier for this `SnoopLogg` instance. This is used to prevent this
       * instance from processing it's own messages.
       * @type {Number}
       */
      _id: {
        value: Math.round(Math.random() * 1e9)
      },

      /**
       * A regex pattern of namespaces to ignore.
       * @type {RegExp|null}
       */
      _ignore: {
        writable: true,
        value: null
      },

      /**
       * Options that are passed into `util.inspect()` to stringify objects. If set to
       * `null`, then the value is stringified using Node's `util.format()`.
       * @type {Object}
       */
      _inspectOptions: {
        writable: true,
        value: {
          breakLength: 0,
          colors: true,
          depth: 4,
          showHidden: false
        }
      },

      /**
       * The minumum brightness when auto-selecting a color. Defaults to `80`.
       * @type {Number}
       */
      _minBrightness: {
        writable: true,
        value: process.env.SNOOPLOGG_MIN_BRIGHTNESS !== undefined ? Math.min(255, Math.max(0, parseInt(process.env.SNOOPLOGG_MIN_BRIGHTNESS))) : 80
      },

      /**
       * A list of middlewares to call and process log messages prior
       * to dispatching.
       * @type {Array.<Function>}
       */
      _middlewares: {
        value: []
      },

      /**
       * The maximum brightness when auto-selecting a color. Defaults to `210`.
       * @type {Number}
       */
      _maxBrightness: {
        writable: true,
        value: process.env.SNOOPLOGG_MAX_BRIGHTNESS !== undefined ? Math.min(255, Math.max(0, parseInt(process.env.SNOOPLOGG_MAX_BRIGHTNESS))) : 210
      },

      /**
       * A list of objects containing the stream and theme name.
       * @type {Array.<Object>}
       */
      _streams: {
        value: []
      },

      /**
       * A map of style names and their functions.
       * @type {Object}
       */
      styles: {
        enumerable: true,
        value: {}
      },

      /**
       * A list of themes and the function to apply them.
       * @type {Object.<String,Function>}
       */
      _themes: {
        value: {}
      },

      /**
       * A map of all registered log types.
       * @type {Object.<String, Number>}
       */
      _types: {
        value: {}
      },

      /**
       * Re-export of the `chalk` library.
       * @type {Object}
       */
      chalk: {
        enumerable: true,
        value: _chalk.default
      }
    }); // This is where things get complicated...
    //
    // The prototype chain at this point looks like this:
    //
    //    `SnoopLogg.prototype`
    //      `Logger.prototype`
    //        `Functionator.prototype`
    //          `Object.prototype`
    //
    // We want `type()` to dynamically add new log functions to `Logger.prototype` so that
    // every namespace under a specific `SnoopLogg` instance can use it, but we don't want
    // the new log functions added to every `SnoopLogg` instance.
    //
    // We need to generate a new `Logger.prototype` and swap out the original in this
    // instance's prototype for a cloned `Logger.prototype` that `type()` can modify. To make
    // things more complicated, you can't just swap out the `Logger.prototype` because it's
    // under `SnoopLogg.prototype` and that would affect every `SnoopLogg` instance.
    //
    // What we need to do is create a new `Logger.prototype` and cache it so nested namespaced
    // `Logger` instances can reference it. Then we need to a generate a new `SnoopLogg`
    // prototype that extends the generated `Logger.prototype` and set the prototype of this
    // instance to it.
    //
    //    Cloned `SnoopLogg.prototype`
    //      Cloned and cached `Logger.prototype`
    //        'Functionator.prototype`
    //          'Object.prototype'

    this.proto = Object.create(Functionator, Object.getOwnPropertyDescriptors(Logger.prototype));
    Object.defineProperty(this.proto, '__id', {
      value: this._id
    });
    Object.setPrototypeOf(this, Object.create(this.proto, Object.getOwnPropertyDescriptors(SnoopLogg.prototype)));

    if (opts) {
      this.config(opts);
    }
  }
  /**
   * Stylizes text.
   *
   * @param {String} style - A comma-separated list of styles to apply.
   * @param {*} text - The string to stylize.
   * @returns {String}
   * @access private
   */


  applyStyle(style, text) {
    if (style && text) {
      return style.split(',').reduce((text, style) => this.styles[style] ? this.styles[style](text) : text, String(text));
    }

    return text;
  }
  /**
   * Allows settings to be changed.
   *
   * @param {Object} [opts] - Various options.
   * @param {String|Array.<String>} [opts.colors] - An array or comma-separated list of colors to
   * choose from when auto-styling.
   * @param {Object} [opts.inspectOptions] - Options to pass into `util.inspect()` when
   * stringifying objects. Set to `null` to stringify objects using Node's `util.format()`.
   * @param {Number} [opts.maxBufferSize] - The max buffer size.
   * @returns {SnoopLogg}
   * @access public
   */


  config(opts = {}) {
    if (!opts || typeof opts !== 'object') {
      throw new TypeError('Expected config options to be an object');
    }

    if (opts.colors) {
      if (typeof opts.colors !== 'string' && !Array.isArray(opts.colors)) {
        throw new TypeError('Expected colors to be a string or array');
      }

      this._colors = typeof opts.colors === 'string' ? opts.colors.split(',') : opts.colors;
    }

    if (opts.inspectOptions) {
      if (typeof opts.inspectOptions !== 'object') {
        throw new TypeError('Expected inspect options to be an object');
      }

      this._inspectOptions = opts.inspectOptions;
    }

    if (opts.minBrightness) {
      if (typeof opts.minBrightness !== 'number') {
        throw new TypeError('Expected minimum brightness to be a number');
      }

      if (opts.minBrightness < 0 || opts.minBrightness > 255) {
        throw new RangeError('Minimum brightness must be between 0 and 255');
      }

      this._minBrightness = opts.minBrightness;
    }

    if (opts.maxBrightness) {
      if (typeof opts.maxBrightness !== 'number') {
        throw new TypeError('Expected maximum brightness to be a number');
      }

      if (opts.maxBrightness < 0 || opts.maxBrightness > 255) {
        throw new RangeError('Maximum brightness must be between 0 and 255');
      }

      if (opts.maxBrightness < this._minBrightness) {
        throw new RangeError('Maximum brightness must greater than or equal to the minimum brightness');
      }

      this._maxBrightness = opts.maxBrightness;
    }

    if (opts.theme) {
      if (typeof opts.theme !== 'string') {
        throw new TypeError('Expected theme to be a string');
      }

      this._defaultTheme = opts.theme;
    }

    if (Object.prototype.hasOwnProperty.call(opts, 'maxBufferSize')) {
      try {
        this._buffer.maxSize = opts.maxBufferSize;
      } catch (e) {
        let err = e;

        if (e instanceof TypeError) {
          err = new TypeError(`Invalid max buffer size: ${e.message}`);
        } else if (e instanceof RangeError) {
          err = new RangeError(`Invalid max buffer size: ${e.message}`);
        }

        throw err;
      }
    }

    return this;
  }
  /**
   * Dispatches a message object through the middlewares, filters, and eventually to all output
   * streams.
   *
   * @param {Object} msg - A message object.
   * @param {Array} msg.args - An array of zero or more arguments that will be formatted into the
   * final log message.
   * @access public
   */


  dispatch(msg) {
    if (!msg || typeof msg !== 'object') {
      return;
    }

    if (!Array.isArray(msg.args)) {
      throw new TypeError('Expected args to be an array');
    } // run all middleware


    for (const {
      fn
    } of this._middlewares) {
      msg = fn(msg) || msg;
    } // add the message to the buffer


    this._buffer.push(msg);

    if (msg.id === this._id && msg.enabled || msg.id !== this._id && this.isEnabled(msg.ns)) {
      for (const s of this._streams) {
        msg.formatter = this._themes[s.theme] || this._themes[this._defaultTheme];
        s.stream.write(s.stream._writableState && s.stream._writableState.objectMode ? msg : format(msg));
      }
    }

    if (msg.id === this._id) {
      process.emit('snooplogg', msg);
    }
  }
  /**
   * Enables log output for the given pattern.
   *
   * @param {String} [pattern] - A string with one or more comma-separated namespaces to enable
   * logging for. If the string is empty or null, then all log output will be silenced. If the
   * pattern is `*`, then all log messages will be displayed.
   * @returns {SnoopLogg}
   * @access public
   */


  enable(pattern = '') {
    if (pattern && typeof pattern !== 'string' && !(pattern instanceof RegExp)) {
      throw new TypeError('Expected pattern to be a string or regex');
    }

    this._allow = null;
    this._ignore = null;

    if (pattern === '*') {
      this._allow = '*';
    } else if (pattern instanceof RegExp) {
      this._allow = pattern;
    } else if (pattern) {
      const allows = [];
      const ignores = [];

      for (let p of pattern.split(/[\s,]+/)) {
        if (p) {
          p = p.replace(/\*/g, '.*?');

          if (p[0] === '-') {
            ignores.push(p.slice(1));
          } else {
            allows.push(p);
          }
        }
      }

      if (allows.length) {
        this._allow = new RegExp(`^(${allows.join('|')})$`);
      } else {
        this._allow = /./;
      }

      if (ignores.length) {
        this._ignore = new RegExp(`^(${ignores.join('|')})$`);
      }
    }

    return this;
  }
  /**
   * Determines if the specified namespace is enabled.
   *
   * @param {?String} namespace - The namespace.
   * @returns {Boolean}
   * @access public
   */


  isEnabled(namespace) {
    const allow = this._allow;

    if (allow === null) {
      // all logging is silenced
      return false;
    }

    if (!namespace || allow === '*') {
      // nothing to filter
      return true;
    }

    const ignore = this._ignore;

    if (allow && allow.test(namespace) && (!ignore || !ignore.test(namespace))) {
      return true;
    }

    return false;
  }
  /**
   * Explicit way of creating a namespace. `snooplogg('foo")` and `snooplogg.ns('foo')` are
   * equivalent.
   *
   * @param {?String} [namespace] - The name for this logger instance.
   * @returns {Logger}
   * @access public
   */


  ns(namespace) {
    if (!this._namespaces[namespace]) {
      this._namespaces[namespace] = bind(Object.setPrototypeOf(new Logger(namespace, this, this), this.proto));
    }

    return this._namespaces[namespace];
  }
  /**
   * Adds a stream to pipe log messages to.
   *
   * @param {stream.Writable} stream - The stream to pipe messages to.
   * @param {Object} [opts] - Various options.
   * @param {Boolean} [opts.flush=false] - When true, immediately flushes the buffer of log
   * messages to the stream.
   * @param {String} [opts.theme] - The theme to apply to all messages written to this stream.
   * @returns {SnoopLogg}
   * @access public
   */


  pipe(stream, opts = {}) {
    if (!stream) {
      throw new TypeError('Invalid stream');
    }

    if (opts && typeof opts !== 'object') {
      throw new TypeError('Expected options to be an object');
    } // don't add the stream twice


    for (const s of this._streams) {
      if (s.stream === stream) {
        return this;
      }
    }

    this._streams.push({
      stream,
      theme: opts.theme
    }); // listen if the stream ends so we can remove it


    stream.on('end', () => {
      for (let i = 0; i < this._streams.length; i++) {
        if (this._streams[i].stream === stream) {
          this._streams.splice(i--, 1);
        }
      }
    }); // flush the buffers

    if (opts.flush) {
      for (const msg of this._buffer) {
        if (msg.id === this._id && msg.enabled || msg.id !== this._id && this.isEnabled(msg.ns)) {
          msg.formatter = opts.theme && this._themes[opts.theme] || this._themes[this._defaultTheme];
          stream.write(stream._writableState && stream._writableState.objectMode ? msg : format(msg));
        }
      }
    }

    return this;
  }
  /**
   * Starts listenening for events from other SnoopLogg instances.
   *
   * @param {String} [nsPrefix] - An optional label to prepend to the namespace for log messages
   * from other SnoopLogg instances.
   * @returns {SnoopLogg}
   * @access public
   */


  snoop(nsPrefix) {
    if (nsPrefix && typeof nsPrefix !== 'string') {
      throw new TypeError('Expected namespace prefix to be a string');
    }

    this.unsnoop();

    this.onSnoopMessage = msg => {
      if (msg.id !== this._id) {
        if (nsPrefix) {
          msg = Object.assign({}, msg);
          msg.ns = nsPrefix + (msg.ns || '');
        }

        this.dispatch(msg);
      }
    };

    process.on('snooplogg', this.onSnoopMessage);
    return this;
  }
  /**
   * Enables all namespaces effectively allowing all logging to be written to stdout/stderr.
   *
   * @returns {SnoopLogg}
   * @access public
   */


  get stdio() {
    return this.enable('*');
  }
  /**
   * Registers a function that applies a style to a message.
   *
   * @param {String} name - The name of the style.
   * @param {Function} fn - A function to call that applies the style.
   * @returns {SnoopLogg}
   * @access public
   */


  style(name, fn) {
    if (!name || typeof name !== 'string') {
      throw new TypeError('Expected name to be a string');
    }

    if (!fn || typeof fn !== 'function') {
      throw new TypeError('Expected fn to be a function');
    }

    this.styles[name] = fn.bind(this);
    return this;
  }
  /**
   * Registers a function that applies a theme to a message.
   *
   * @param {String} name - The name of the theme.
   * @param {Function} fn - A function to call that applies the theme.
   * @returns {SnoopLogg}
   * @access public
   */


  theme(name, fn) {
    if (!name || typeof name !== 'string') {
      throw new TypeError('Expected name to be a string');
    }

    if (!fn || typeof fn !== 'function') {
      throw new TypeError('Expected fn to be a function');
    }

    this._themes[name] = fn.bind(this);
    return this;
  }
  /**
   * Registers a new log type.
   *
   * @param {String} name - The log type name.
   * @param {Object} [opts] - Various options.
   * @param {String} [opts.style] - The color to associate with this type.
   * @param {String} [opts.label] - The label to display when print this type of log message.
   * @param {Number} [opts.fd] - The file descriptor. Use `0` for stdout and `1` for stderr.
   * @returns {SnoopLogg}
   * @access public
   */


  type(name, opts = {}) {
    if (!name || typeof name !== 'string') {
      throw new TypeError('Expected name to be a non-empty string');
    }

    if (!opts || typeof opts !== 'object') {
      throw new TypeError('Expected opts to be an object');
    }

    const type = this._types[name] = {
      type: name,
      typeStyle: opts.style,
      typeLabel: opts.label !== undefined ? opts.label : name,
      fd: opts.fd || 0
    };

    if (!Object.getOwnPropertyDescriptor(this.proto, name)) {
      // wire up the actual log type function
      // note: this has to use a getter so that `this` can be resolved at
      // runtime because if you `import { info } from 'SnoopLogg'`, `info()`
      // gets forced into the global context.
      const root = this;
      Object.defineProperty(this.proto, name, {
        configurable: true,
        enumerable: true,

        value(...args) {
          root.dispatch({
            id: root._id,
            args: typeof opts.transform === 'function' ? opts.transform(args) : args,
            ...type,
            ns: this._namespace,
            nsStyle: this._namespaceStyle,
            ts: new Date(),
            enabled: this.enabled
          });
          return this;
        }

      });
    }

    return this;
  }
  /**
   * Stops piping messages to the specified stream.
   *
   * @param {stream.Writable} stream - The stream to no longer pipe messages to.
   * @returns {SnoopLogg}
   * @access public
   */


  unpipe(stream) {
    if (!stream) {
      throw new TypeError('Invalid stream');
    }

    for (let i = 0; i < this._streams.length; i++) {
      if (this._streams[i].stream === stream) {
        this._streams.splice(i--, 1);
      }
    }

    return this;
  }
  /**
   * Stops listenening for events from other SnoopLogg instances.
   *
   * @returns {SnoopLogg}
   * @access public
   */


  unsnoop() {
    if (this.onSnoopMessage) {
      process.removeListener('snooplogg', this.onSnoopMessage);
    }

    return this;
  }
  /**
   * Adds a middleware function to the message dispatching system.
   *
   * @param {Function} middleware - A middleware function to add to the list.
   * @param {Number} [priority=0] - The middleware priority. Negative priority is run before
   * positive values.
   * @returns {SnoopLogg}
   * @access public
   */


  use(middleware, priority = 0) {
    if (typeof middleware !== 'function') {
      throw new TypeError('Expected middleware to be a function');
    }

    if (typeof priority !== 'number') {
      throw new TypeError('Expected priority to be a number');
    }

    this._middlewares.push({
      fn: middleware,
      priority
    });

    this._middlewares.sort((a, b) => b.priority - a.priority);

    return this;
  }

}
/**
 * Applies the formatter to the message and returns the resulting string.
 *
 * @param {Object} msg - The message object
 * @returns {String}
 */


exports.SnoopLogg = SnoopLogg;

function format(msg) {
  if (msg && typeof msg === 'object' && !(msg instanceof Buffer)) {
    if (typeof msg.formatter === 'function') {
      return msg.formatter(msg);
    }

    return _util.default.format.apply(null, msg.args) + '\n';
  }

  return String(msg);
}
/**
 * ANSI color sequence regex.
 * @type {RegExp}
 */


const pattern = ['[\\u001B\\u009B][[\\]()#;?]*(?:(?:(?:[a-zA-Z\\d]*(?:;[a-zA-Z\\d]*)*)?\\u0007)', '(?:(?:\\d{1,4}(?:;\\d{0,4})*)?[\\dA-PRZcf-ntqry=><~]))'].join('|');
const stripRegExp = new RegExp(pattern, 'g');
/**
 * Transform stream that strips colors from the logger to the next stream in the
 * pipe.
 */

class StripColors extends _stream.Transform {
  constructor(opts = {}) {
    opts.objectMode = true;
    super(opts);
  }

  _transform(msg, enc, cb) {
    /* istanbul ignore else */
    if (msg && typeof msg === 'object' && !(msg instanceof Buffer)) {
      this.push(format(msg).replace(stripRegExp, ''));
    } else {
      this.push(msg.toString().replace(stripRegExp, ''));
    }

    cb();
  }

}
/**
 * Helper stream that converts and formats the message object to a string. If
 * the message has already been converted to a string, then this simply passes
 * the text through.
 */


exports.StripColors = StripColors;

class Format extends _stream.Transform {
  constructor(opts = {}) {
    opts.objectMode = true;
    super(opts);
  }

  _transform(msg, enc, cb) {
    /* istanbul ignore else */
    if (msg && typeof msg === 'object' && !(msg instanceof Buffer)) {
      this.push(format(msg));
    } else {
      this.push(msg);
    }

    cb();
  }

}
/**
 * The default stream that writes log messages to stdio.
 */


exports.Format = Format;

class StdioStream extends _stream.Writable {
  constructor(opts = {}) {
    opts.objectMode = true;
    super(opts);
    const stdout = opts.stdout || process.stdout;
    const stderr = opts.stderr || process.stderr;
    /* istanbul ignore else */

    if (_supportsColor.default) {
      this.stdout = stdout;
      this.stderr = stderr;
    } else {
      (this.stdout = new StripColors()).pipe(stdout);
      (this.stderr = new StripColors()).pipe(stderr);
    }
  }

  _write(msg, enc, cb) {
    /* istanbul ignore next */
    if (msg && typeof msg === 'object' && !(msg instanceof Buffer)) {
      if (msg.fd === 1) {
        this.stderr.write(format(msg));
      } else {
        this.stdout.write(format(msg));
      }
    } else {
      this.stdout.write(String(msg));
    }

    cb();
  }

}
/**
 * A writable stream that will
 *
 * @class StdioDispatcher
 * @extends {Writable}
 */


exports.StdioStream = StdioStream;

class StdioDispatcher extends _stream.Writable {
  constructor(logger, params) {
    super();
    this.logger = logger;
    this.params = params;
  }

  _write(data, enc, cb) {
    const origin = this.logger._root || this.logger;
    origin.dispatch({
      id: origin._id,
      args: [data.toString().replace(/(\r\n|\n)$/, '')],
      ts: new Date(),
      ...this.params
    });
    cb();
  }

}
/**
 * Loops over an `SnoopLogg` or `Logger` instance's prototype chain up to the `Functionator`
 * prototype while binding the prototype functions directly to the instance object so that
 * the method's context isn't lost if the log functions aren't destructured.
 *
 * @param {Object} obj - The object instance to bind methods to.
 * @returns {Object} The original object.
 */


function bind(obj) {
  for (let proto = obj.__proto__; proto; proto = proto.__proto__) {
    for (const prop of Object.getOwnPropertyNames(proto)) {
      let desc = Object.getOwnPropertyDescriptor(proto, prop);

      if (prop === 'constructor' || !desc) {
        continue;
      } else if (typeof desc.get === 'function') {
        desc.get = desc.get.bind(obj);
      } else if (typeof desc.value === 'function') {
        desc.value = desc.value.bind(obj);
      } else {
        continue;
      }

      Object.defineProperty(obj, prop, desc);
    }

    if (proto.constructor.name === 'Functionator') {
      break;
    }
  }

  return obj;
}
/**
 * Creates a snooplogg instance with a bunch of defaults.
 *
 * @returns {SnoopLogg}
 */


function createInstanceWithDefaults() {
  return bind(new SnoopLogg().type('log', {
    style: 'gray',
    label: null
  }).type('trace', {
    style: 'gray',

    transform(args) {
      const err = {
        name: 'Trace',
        message: _util.default.format.apply(null, args)
      };
      Error.captureStackTrace(err); // no sense leaving this function in the stack

      return [`${err.name}${err.message ? `: ${err.message}` : ''}\n${err.stack.split('\n').slice(3).join('\n')}`];
    }

  }).type('debug', {
    style: 'magenta'
  }).type('info', {
    style: 'green'
  }).type('warn', {
    style: 'yellow',
    fd: 1
  }).type('error', {
    style: 'red',
    fd: 1
  }).type('fatal', {
    style: 'white,bgRed',
    fd: 1
  }).style('bold', _chalk.default.bold).style('dim', _chalk.default.dim).style('italic', _chalk.default.italic).style('underline', _chalk.default.underline).style('inverse', _chalk.default.inverse).style('hidden', _chalk.default.hidden).style('strikethrough', _chalk.default.strikethrough).style('black', _chalk.default.black).style('red', _chalk.default.red).style('black', _chalk.default.black).style('green', _chalk.default.green).style('yellow', _chalk.default.yellow).style('blue', _chalk.default.blue).style('magenta', _chalk.default.magenta).style('cyan', _chalk.default.cyan).style('white', _chalk.default.white).style('gray', _chalk.default.gray).style('bgBlack', _chalk.default.bgBlack).style('bgRed', _chalk.default.bgRed).style('bgGreen', _chalk.default.bgGreen).style('bgYellow', _chalk.default.bgYellow).style('bgBlue', _chalk.default.bgBlue).style('bgMagenta', _chalk.default.bgMagenta).style('bgCyan', _chalk.default.bgCyan).style('bgWhite', _chalk.default.bgWhite).style('uppercase', s => String(s).toUpperCase()).style('lowercase', s => String(s).toLowerCase()).style('bracket', s => `[${s}]`).style('paren', s => `(${s})`).style('highlight', _chalk.default.cyan).style('lowlight', _chalk.default.blue).style('ok', _chalk.default.green).style('notice', _chalk.default.yellow).style('alert', _chalk.default.red).style('note', _chalk.default.gray).style('auto', function (text) {
    let hash = 0;

    for (const i in text) {
      hash = (hash << 5) - hash + text.charCodeAt(i) | 0;
    }

    hash = Math.abs(hash); // check the cache first

    let color = this._autoCache[hash];

    if (!color) {
      // no cache, do we have a list of valid colors?
      let colors = this._colors;

      if (colors && colors.length) {
        // yes, pick from the list of colors
        color = this._autoCache[hash] = colors[hash % colors.length];
      } else {
        // no list, pick a brightness and then load the lookup table and pick a color
        const brightness = hash % Math.max(1, this._maxBrightness - this._minBrightness) + this._minBrightness;

        const {
          count,
          getColor
        } = _bryt.default.getBrightness(brightness);
        /* istanbul ignore if */


        if (!count) {
          // this should never happen
          return text;
        }

        color = this._autoCache[hash] = _bryt.default.toRGB(getColor(hash % count));
      }
    }

    if (Array.isArray(color)) {
      return _chalk.default.rgb.apply(_chalk.default, color)(text);
    }

    return this.styles[color](text);
  }).theme('detailed', function (msg) {
    const ns = this.applyStyle(msg.nsStyle || 'auto', msg.ns);
    const type = this.applyStyle(msg.typeStyle, msg.typeLabel);
    const ts = msg.ts instanceof Date ? msg.ts : new Date(msg.ts);
    const prefix = this.applyStyle('magenta', ts.toISOString()) + ' ' + (ns ? ns + ' ' : '') + (type ? type + ' ' : '');
    const args = this._inspectOptions ? msg.args.map(it => isJSON(it) ? _util.default.inspect(it, this._inspectOptions) : it) : msg.args;

    const result = _util.default.format.apply(null, args);

    return `${prefix ? result.split('\n').map(s => prefix + s).join('\n') : result}\n`;
  }).theme('standard', function (msg) {
    const ns = this.applyStyle(msg.nsStyle || 'auto', msg.ns);
    const type = this.applyStyle(msg.typeStyle, msg.typeLabel);
    const prefix = (ns ? ns + ' ' : '') + (type ? type + ' ' : '');
    const args = this._inspectOptions ? msg.args.map(it => isJSON(it) ? _util.default.inspect(it, this._inspectOptions) : it) : msg.args;

    const result = _util.default.format.apply(null, args);

    return `${prefix ? result.split('\n').map(s => prefix + s).join('\n') : result}\n`;
  }).theme('minimal', function (msg) {
    const args = this._inspectOptions ? msg.args.map(it => isJSON(it) ? _util.default.inspect(it, this._inspectOptions) : it) : msg.args;
    return `${_util.default.format.apply(null, args)}\n`;
  }));
}
/**
 * Checks if a variable is a JSON compatible object.
 *
 * @param {*} it - The value to check.
 * @returns {Boolean}
 */


function isJSON(it) {
  if (it === null || typeof it !== 'object') {
    return false;
  }

  const proto = Object.getPrototypeOf(it);
  return proto && proto.constructor && proto.constructor.name === 'Object';
} // create the global instance and wire up the built-in types


const instance = createInstanceWithDefaults().enable(process.env.SNOOPLOGG || process.env.DEBUG).pipe(new StdioStream(), {
  flush: true
});
var _default = instance;
exports.default = _default;
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LmpzIl0sIm5hbWVzIjpbIkZ1bmN0aW9uYXRvciIsIkZ1bmN0aW9uIiwiY29uc3RydWN0b3IiLCJmbiIsIk9iamVjdCIsInNldFByb3RvdHlwZU9mIiwibmV3IiwidGFyZ2V0IiwicHJvdG90eXBlIiwiTG9nZ2VyIiwibmFtZXNwYWNlIiwicGFyZW50Iiwicm9vdCIsInN0eWxlIiwibnMiLCJfbnMiLCJjb25jYXQiLCJfbmFtZXNwYWNlcyIsImJpbmQiLCJfcm9vdCIsInByb3RvIiwiZGVmaW5lUHJvcGVydGllcyIsIl9uYW1lc3BhY2UiLCJ3cml0YWJsZSIsInZhbHVlIiwiam9pbiIsIl9uYW1lc3BhY2VTdHlsZSIsIl9wYXJlbnQiLCJjb25zb2xlIiwiX2NvbnNvbGUiLCJDb25zb2xlIiwiY3JlYXRlU3RyZWFtIiwidHlwZSIsImZkIiwiU3RkaW9EaXNwYXRjaGVyIiwibnNTdHlsZSIsImVuYWJsZWQiLCJpc0VuYWJsZWQiLCJTbm9vcExvZ2ciLCJvcHRzIiwidW5kZWZpbmVkIiwiVHlwZUVycm9yIiwiX2FsbG93IiwiX2F1dG9DYWNoZSIsIl9idWZmZXIiLCJOYW5vQnVmZmVyIiwicHJvY2VzcyIsImVudiIsIlNOT09QTE9HR19NQVhfQlVGRkVSX1NJWkUiLCJNYXRoIiwibWF4IiwicGFyc2VJbnQiLCJfY29sb3JzIiwiU05PT1BMT0dHX0NPTE9SX0xJU1QiLCJzcGxpdCIsIl9kZWZhdWx0VGhlbWUiLCJTTk9PUExPR0dfREVGQVVMVF9USEVNRSIsIl9pZCIsInJvdW5kIiwicmFuZG9tIiwiX2lnbm9yZSIsIl9pbnNwZWN0T3B0aW9ucyIsImJyZWFrTGVuZ3RoIiwiY29sb3JzIiwiZGVwdGgiLCJzaG93SGlkZGVuIiwiX21pbkJyaWdodG5lc3MiLCJTTk9PUExPR0dfTUlOX0JSSUdIVE5FU1MiLCJtaW4iLCJfbWlkZGxld2FyZXMiLCJfbWF4QnJpZ2h0bmVzcyIsIlNOT09QTE9HR19NQVhfQlJJR0hUTkVTUyIsIl9zdHJlYW1zIiwic3R5bGVzIiwiZW51bWVyYWJsZSIsIl90aGVtZXMiLCJfdHlwZXMiLCJjaGFsayIsImNyZWF0ZSIsImdldE93blByb3BlcnR5RGVzY3JpcHRvcnMiLCJkZWZpbmVQcm9wZXJ0eSIsImNvbmZpZyIsImFwcGx5U3R5bGUiLCJ0ZXh0IiwicmVkdWNlIiwiU3RyaW5nIiwiQXJyYXkiLCJpc0FycmF5IiwiaW5zcGVjdE9wdGlvbnMiLCJtaW5CcmlnaHRuZXNzIiwiUmFuZ2VFcnJvciIsIm1heEJyaWdodG5lc3MiLCJ0aGVtZSIsImhhc093blByb3BlcnR5IiwiY2FsbCIsIm1heFNpemUiLCJtYXhCdWZmZXJTaXplIiwiZSIsImVyciIsIm1lc3NhZ2UiLCJkaXNwYXRjaCIsIm1zZyIsImFyZ3MiLCJwdXNoIiwiaWQiLCJzIiwiZm9ybWF0dGVyIiwic3RyZWFtIiwid3JpdGUiLCJfd3JpdGFibGVTdGF0ZSIsIm9iamVjdE1vZGUiLCJmb3JtYXQiLCJlbWl0IiwiZW5hYmxlIiwicGF0dGVybiIsIlJlZ0V4cCIsImFsbG93cyIsImlnbm9yZXMiLCJwIiwicmVwbGFjZSIsInNsaWNlIiwibGVuZ3RoIiwiYWxsb3ciLCJpZ25vcmUiLCJ0ZXN0IiwicGlwZSIsIm9uIiwiaSIsInNwbGljZSIsImZsdXNoIiwic25vb3AiLCJuc1ByZWZpeCIsInVuc25vb3AiLCJvblNub29wTWVzc2FnZSIsImFzc2lnbiIsInN0ZGlvIiwibmFtZSIsInR5cGVTdHlsZSIsInR5cGVMYWJlbCIsImxhYmVsIiwiZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yIiwiY29uZmlndXJhYmxlIiwidHJhbnNmb3JtIiwidHMiLCJEYXRlIiwidW5waXBlIiwicmVtb3ZlTGlzdGVuZXIiLCJ1c2UiLCJtaWRkbGV3YXJlIiwicHJpb3JpdHkiLCJzb3J0IiwiYSIsImIiLCJCdWZmZXIiLCJ1dGlsIiwiYXBwbHkiLCJzdHJpcFJlZ0V4cCIsIlN0cmlwQ29sb3JzIiwiVHJhbnNmb3JtIiwiX3RyYW5zZm9ybSIsImVuYyIsImNiIiwidG9TdHJpbmciLCJGb3JtYXQiLCJTdGRpb1N0cmVhbSIsIldyaXRhYmxlIiwic3Rkb3V0Iiwic3RkZXJyIiwic3VwcG9ydHNDb2xvciIsIl93cml0ZSIsImxvZ2dlciIsInBhcmFtcyIsImRhdGEiLCJvcmlnaW4iLCJvYmoiLCJfX3Byb3RvX18iLCJwcm9wIiwiZ2V0T3duUHJvcGVydHlOYW1lcyIsImRlc2MiLCJnZXQiLCJjcmVhdGVJbnN0YW5jZVdpdGhEZWZhdWx0cyIsIkVycm9yIiwiY2FwdHVyZVN0YWNrVHJhY2UiLCJzdGFjayIsImJvbGQiLCJkaW0iLCJpdGFsaWMiLCJ1bmRlcmxpbmUiLCJpbnZlcnNlIiwiaGlkZGVuIiwic3RyaWtldGhyb3VnaCIsImJsYWNrIiwicmVkIiwiZ3JlZW4iLCJ5ZWxsb3ciLCJibHVlIiwibWFnZW50YSIsImN5YW4iLCJ3aGl0ZSIsImdyYXkiLCJiZ0JsYWNrIiwiYmdSZWQiLCJiZ0dyZWVuIiwiYmdZZWxsb3ciLCJiZ0JsdWUiLCJiZ01hZ2VudGEiLCJiZ0N5YW4iLCJiZ1doaXRlIiwidG9VcHBlckNhc2UiLCJ0b0xvd2VyQ2FzZSIsImhhc2giLCJjaGFyQ29kZUF0IiwiYWJzIiwiY29sb3IiLCJicmlnaHRuZXNzIiwiY291bnQiLCJnZXRDb2xvciIsImJyeXQiLCJnZXRCcmlnaHRuZXNzIiwidG9SR0IiLCJyZ2IiLCJwcmVmaXgiLCJ0b0lTT1N0cmluZyIsIm1hcCIsIml0IiwiaXNKU09OIiwiaW5zcGVjdCIsInJlc3VsdCIsImdldFByb3RvdHlwZU9mIiwiaW5zdGFuY2UiLCJTTk9PUExPR0ciLCJERUJVRyJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBQTs7QUFFQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFFQTs7QUFDQTs7OztBQUVBO0FBQ0E7QUFDQTtBQUNBLE1BQU1BLFlBQU4sU0FBMkJDLFFBQTNCLENBQW9DO0FBQ25DQyxFQUFBQSxXQUFXLENBQUNDLEVBQUQsRUFBSztBQUNmLFdBQU9DLE1BQU0sQ0FBQ0MsY0FBUCxDQUFzQkYsRUFBdEIsRUFBMEJHLEdBQUcsQ0FBQ0MsTUFB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IjpbImltcG9ydCAnc291cmNlLW1hcC1zdXBwb3J0L3JlZ2lzdGVyJztcblxuaW1wb3J0IGJyeXQgZnJvbSAnYnJ5dCc7XG5pbXBvcnQgY2hhbGsgZnJvbSAnY2hhbGsnO1xuaW1wb3J0IE5hbm9CdWZmZXIgZnJvbSAnbmFub2J1ZmZlcic7XG5pbXBvcnQgc3VwcG9ydHNDb2xvciBmcm9tICdzdXBwb3J0cy1jb2xvcic7XG5pbXBvcnQgdXRpbCBmcm9tICd1dGlsJztcblxuaW1wb3J0IHsgQ29uc29sZSB9IGZyb20gJ2NvbnNvbGUnO1xuaW1wb3J0IHsgVHJhbnNmb3JtLCBXcml0YWJsZSB9IGZyb20gJ3N0cmVhbSc7XG5cbi8qKlxuICogVGhlIHNlY3JldCBzYXVjZS5cbiAqL1xuY2xhc3MgRnVuY3Rpb25hdG9yIGV4dGVuZHMgRnVuY3Rpb24ge1xuXHRjb25zdHJ1Y3Rvcihmbikge1xuXHRcdHJldHVybiBPYmplY3Quc2V0UHJvdG90eXBlT2YoZm4sIG5ldy50YXJnZXQucHJvdG90eXBlKTtcblx0fVxufVxuXG4vKipcbiAqIENvbnRhaW5zIGEgbmFtZXNwYWNlZCBsb2dnZXIuIFRoZSBhY3R1YWwgbG9nIGZ1bmN0aW9ucyBhcmUgZGVmaW5lZCBvbiB0aGUgTG9nZ2VyJ3MgcHJvdG90eXBlLlxuICpcbiAqIE5vdGUgdGhhdCB0aGlzIGlzIGZvciBpbnRlcm5hbCB1c2Ugb25seSBhbmQgc2hvdWxkIG5vdCB1c2VkIHB1YmxpY2x5LlxuICovXG5jbGFzcyBMb2dnZXIgZXh0ZW5kcyBGdW5jdGlvbmF0b3Ige1xuXHQvKipcblx0ICogQ29uc3RydWN0cyBhIG5ldyBsb2dnZXIgaW5zdGFuY2UuXG5cdCAqXG5cdCAqIEBwYXJhbSB7P1N0cmluZ30gW25hbWVzcGFjZV0gLSBUaGUgbmFtZSBmb3IgdGhpcyBsb2dnZXIgaW5zdGFuY2UuXG5cdCAqIEBwYXJhbSB7P0xvZ2dlcn0gW3BhcmVudF0gLSBUaGUgcGFyZW50IGxvZ2dlci5cblx0ICogQHBhcmFtIHs/U25vb3BMb2dnfSBbcm9vdF0gLSBBIHJlZmVyZW5jZSB0byB0aGUgdG9wLWxldmVsIFNub29wTG9nZyBpbnN0YW5jZS5cblx0ICogQHBhcmFtIHs/U3RyaW5nfSBbc3R5bGVdIC0gVGhlIHN0eWxlIGZvciB0aGlzIG5hbWVzcGFjZS4gVWx0aW1hdGVseSBpdCdzIHVwIHRvIHRoZSB0aGVtZSBhc1xuXHQgKiB0byBob3cgdGhlIG5hbWVzcGFjZSBpcyBzdHlsZWQuXG5cdCAqIEBhY2Nlc3MgcHVibGljXG5cdCAqL1xuXHRjb25zdHJ1Y3RvcihuYW1lc3BhY2UsIHBhcmVudCA9IG51bGwsIHJvb3QgPSBudWxsLCBzdHlsZSA9IG51bGwpIHtcblx0XHRjb25zdCBucyA9ICFuYW1lc3BhY2UgPyBbXSA6IChwYXJlbnQgJiYgcGFyZW50Ll9ucyB8fCBbXSkuY29uY2F0KG5hbWVzcGFjZSk7XG5cblx0XHRzdXBlcihuYW1lc3BhY2UgPT4ge1xuXHRcdFx0aWYgKCF0aGlzLl9uYW1lc3BhY2VzW25hbWVzcGFjZV0pIHtcblx0XHRcdFx0dGhpcy5fbmFtZXNwYWNlc1tuYW1lc3BhY2VdID0gYmluZChcblx0XHRcdFx0XHRPYmplY3Quc2V0UHJvdG90eXBlT2YoXG5cdFx0XHRcdFx0XHRuZXcgTG9nZ2VyKG5hbWVzcGFjZSwgdGhpcywgdGhpcy5fcm9vdCwgc3R5bGUpLFxuXHRcdFx0XHRcdFx0dGhpcy5fcm9vdC5wcm90b1xuXHRcdFx0XHRcdClcblx0XHRcdFx0KTtcblx0XHRcdH1cblx0XHRcdHJldHVybiB0aGlzLl9uYW1lc3BhY2VzW25hbWVzcGFjZV07XG5cdFx0fSk7XG5cblx0XHRPYmplY3QuZGVmaW5lUHJvcGVydGllcyh0aGlzLCB7XG5cdFx0XHQvKipcblx0XHRcdCAqIFRoZSBhY3R1YWwgbG9nIG5hbWVzcGFjZSB1c2VkIGZvciBmaWx0ZXJpbmcuIE5hbWVzcGFjZXMgYXJlIHNlcGFyYXRlZCBieSBhIGNvbG9uICg6KS5cblx0XHRcdCAqIEB0eXBlIHtTdHJpbmd9XG5cdFx0XHQgKi9cblx0XHRcdF9uYW1lc3BhY2U6IHsgd3JpdGFibGU6IHRydWUsIHZhbHVlOiBucy5qb2luKCc6JykgfSxcblxuXHRcdFx0LyoqXG5cdFx0XHQgKiBBIG1hcCBvZiBuYW1lc3BhY2VzIHVuZGVyIHRoaXMgbG9nZ2VyLlxuXHRcdFx0ICogQHR5cGUge09iamVjdH1cblx0XHRcdCAqL1xuXHRcdFx0X25hbWVzcGFjZXM6IHsgdmFsdWU6IHt9IH0sXG5cblx0XHRcdC8qKlxuXHRcdFx0ICogVGhlIHN0eWxlIGZvciB0aGUgbmFtZXNwYWNlLiBUaGlzIHZhbHVlIGlzIGVpdGhlciBtYW51YWxseSBzcGVjaWZpZWQgb3IgYXV0b21hdGljYWxseVxuXHRcdFx0ICogY2hvc2VuLlxuXHRcdFx0ICogQHR5cGUge1N0cmluZ31cblx0XHRcdCAqL1xuXHRcdFx0X25hbWVzcGFjZVN0eWxlOiB7IHZhbHVlOiBzdHlsZSB9LFxuXG5cdFx0XHQvKipcblx0XHRcdCAqIEFuIGFycmF5IG9mIG5hbWVzcGFjZXMgdG8gbWFrZSBpdCBlYXNpZXIgd2hlbiBjb25zdHJ1Y3RpbmcgYSBuZXcgbmFtZXNwYWNlJ3MgbmFtZS5cblx0XHRcdCAqIEB0eXBlIHtBcnJheS48U3RyaW5nPn1cblx0XHRcdCAqL1xuXHRcdFx0X25zOiB7IHdyaXRhYmxlOiB0cnVlLCB2YWx1ZTogbnMgfSxcblxuXHRcdFx0LyoqXG5cdFx0XHQgKiBBIHJlZmVyZW5jZSB0byB0aGUgcGFyZW50IGxvZ2dlci4gVXNlZCB0byBjb25zdHJ1Y3QgdGhlIG5hbWVzcGFjZS5cblx0XHRcdCAqIEB0eXBlIHs/TG9nZ2VyfVxuXHRcdFx0ICovXG5cdFx0XHRfcGFyZW50OiB7IHdyaXRhYmxlOiB0cnVlLCB2YWx1ZTogcGFyZW50IH0sXG5cblx0XHRcdC8qKlxuXHRcdFx0ICogQSByZWZlcmVuY2UgdG8gdGhlIHRvcC1sZXZlbCBTbm9vcExvZ2cgaW5zdGFuY2UuXG5cdFx0XHQgKiBAdHlwZSB7P1Nub29wTG9nZ31cblx0XHRcdCAqL1xuXHRcdFx0X3Jvb3Q6IHsgdmFsdWU6IHJvb3QgfHwgdGhpcyB9XG5cdFx0fSk7XG5cdH1cblxuXHQvKipcblx0ICogQ3JlYXRlcyBhIGBjb25zb2xlYCBvYmplY3QgdGhhdCBpcyB3aXJlZCB1cCB0byB0aGlzIHNub29wbG9nZyBpbnN0YW5jZS5cblx0ICpcblx0ICogQHR5cGUge0NvbnNvbGV9XG5cdCAqIEBhY2Nlc3MgcHVibGljXG5cdCAqL1xuXHRnZXQgY29uc29sZSgpIHtcblx0XHRpZiAoIXRoaXMuX2NvbnNvbGUpIHtcblx0XHRcdHRoaXMuX2NvbnNvbGUgPSBuZXcgQ29uc29sZShcblx0XHRcdFx0dGhpcy5jcmVhdGVTdHJlYW0oeyB0eXBlOiAnZXJyb3InLCBmZDogMiB9KSxcblx0XHRcdFx0dGhpcy5jcmVhdGVTdHJlYW0oeyB0eXBlOiAnbG9nJywgZmQ6IDEgfSlcblx0XHRcdCk7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIHRoaXMuX2NvbnNvbGU7XG5cdH1cblxuXHQvKipcblx0ICogQ3JlYXRlcyBhIHdyaXRhYmxlIHN0cmVhbSB0aGF0IHdoZW4gd3JpdHRlbiB0byB3aWxsIHdyaXRlIHRvIHRoaXMgbG9nZ2VyLlxuXHQgKlxuXHQgKiBAcGFyYW0ge09iamVjdH0gW29wdHNdIC0gVmFyaW91cyBvcHRpb25zLlxuXHQgKiBAcGFyYW0ge051bWJlcn0gW29wdHMuZmRdIC0gVGhlIGZpbGUgZGVzY3JpcHRvciB0byBwYXNzIGFsb25nIHdpdGggdGhlIGxvZyBtZXNzYWdlLlxuXHQgKiBAcGFyYW0ge1N0cmluZ30gW29wdHMudHlwZV0gLSBUaGUgbmFtZSBvZiB0aGUgdHlwZSBvZiBtZXNzYWdlcyBiZWluZyBsb2dnZWQgdG8gdGhpcyBzdHJlYW0uXG5cdCAqIEByZXR1cm5zIHtXcml0YWJsZX1cblx0ICogQGFjY2VzcyBwdWJsaWNcblx0ICovXG5cdGNyZWF0ZVN0cmVhbSh7IGZkLCB0eXBlIH0gPSB7fSkge1xuXHRcdHJldHVybiBuZXcgU3RkaW9EaXNwYXRjaGVyKHRoaXMsIHtcblx0XHRcdHR5cGUsXG5cdFx0XHRmZCxcblx0XHRcdG5zOiB0aGlzLl9uYW1lc3BhY2UsXG5cdFx0XHRuc1N0eWxlOiB0aGlzLl9uYW1lc3BhY2VTdHlsZSxcblx0XHRcdGVuYWJsZWQ6IHRoaXMuZW5hYmxlZFxuXHRcdH0pO1xuXHR9XG5cblx0LyoqXG5cdCAqIERldGVybWluZXMgaWYgdGhpcyBsb2dnZXIgaXMgZW5hYmxlZCBiYXNlZCBvbiB0aGUgcGF0dGVybiBzZXQgYnkgU25vb3BMb2dnJ3MgYGVuYWJsZSgpYC5cblx0ICogQHR5cGUge0Jvb2xlYW59XG5cdCAqIEBhY2Nlc3MgcHVibGljXG5cdCAqL1xuXHRnZXQgZW5hYmxlZCgpIHtcblx0XHRyZXR1cm4gdGhpcy5fcm9vdC5pc0VuYWJsZWQodGhpcy5fbmFtZXNwYWNlKTtcblx0fVxuXG5cdC8qKlxuXHQgKiBUaGUgZnVsbHkgcmVzb2x2ZWQgbmFtZXNwYWNlIGluY2x1ZGluZyBwYXJlbnQgbmFtZXNwYWNlcy5cblx0ICogQHR5cGUgez9TdHJpbmd9XG5cdCAqIEBhY2Nlc3MgcHVibGljXG5cdCAqL1xuXHRnZXQgbmFtZXNwYWNlKCkge1xuXHRcdHJldHVybiB0aGlzLl9uYW1lc3BhY2UgfHwgbnVsbDtcblx0fVxufVxuXG4vKipcbiAqIERlZmluZXMgdGhlIGdsb2JhbCBsb2dnZXIgaW5zdGFuY2Ugd2hpY2ggYWRkZWQgYWRkaXRpb25hbCBwdWJsaWMgQVBJcyBmb3IgY29uZmlndXJhdGlvbiBhbmRcbiAqIGZlYXR1cmVzLlxuICovXG5jbGFzcyBTbm9vcExvZ2cgZXh0ZW5kcyBMb2dnZXIge1xuXHQvKipcblx0ICogR2VuZXJhdGVzIGEgbmFtZXNwYWNlZCBsb2dnZXIgY2xhc3Mgd2l0aCB0aGUgYFNub29wTG9nZ2AgcHJvdG90eXBlIGFuZCBpbml0aWFsaXplcyBpdHNcblx0ICogcHJvcGVydGllcy5cblx0ICpcblx0ICogQHBhcmFtIHtPYmplY3R9IFtvcHRzXSAtIFZhcmlvdXMgY29uZmlnIG9wdGlvbnMuXG5cdCAqIEBhY2Nlc3MgcHVibGljXG5cdCAqL1xuXHRjb25zdHJ1Y3RvcihvcHRzKSB7XG5cdFx0aWYgKG9wdHMgIT09IHVuZGVmaW5lZCAmJiAoIW9wdHMgfHwgdHlwZW9mIG9wdHMgIT09ICdvYmplY3QnKSkge1xuXHRcdFx0dGhyb3cgbmV3IFR5cGVFcnJvcignRXhwZWN0ZWQgb3B0aW9ucyB0byBiZSBhbiBvYmplY3QnKTtcblx0XHR9XG5cblx0XHRzdXBlcigpO1xuXG5cdFx0T2JqZWN0LmRlZmluZVByb3BlcnRpZXModGhpcywge1xuXHRcdFx0LyoqXG5cdFx0XHQgKiBBIHJlZ2V4IHBhdHRlcm4gb2YgbmFtZXNwYWNlcyB0byBtYXRjaCBvciB0aGUgc3RyaW5nIGAqYCB0byBhbGxvdyBhbGwgbmFtZXNwYWNlcy5cblx0XHRcdCAqIEB0eXBlIHtSZWdFeHB8U3RyaW5nfG51bGx9XG5cdFx0XHQgKi9cblx0XHRcdF9hbGxvdzogIHsgd3JpdGFibGU6IHRydWUsIHZhbHVlOiBudWxsIH0sXG5cblx0XHRcdC8qKlxuXHRcdFx0ICogQSBjYWNoZSBvZiBoYXNoZXMgdG8gYXV0by1zZWxlY3RlZCBjb2xvcnMuXG5cdFx0XHQgKiBAdHlwZSB7T2JqZWN0fVxuXHRcdFx0ICovXG5cdFx0XHRfYXV0b0NhY2hlOiB7IHdyaXRhYmxlOiB0cnVlLCB2YWx1ZToge30gfSxcblxuXHRcdFx0LyoqXG5cdFx0XHQgKiBUaGUgbG9nIG1lc3NhZ2UgYnVmZmVyLlxuXHRcdFx0ICogQHR5cGUge0FycmF5LjxPYmplY3Q+fVxuXHRcdFx0ICovXG5cdFx0XHRfYnVmZmVyOiB7XG5cdFx0XHRcdHdyaXRhYmxlOiB0cnVlLFxuXHRcdFx0XHR2YWx1ZTogbmV3IE5hbm9CdWZmZXIocHJvY2Vzcy5lbnYuU05PT1BMT0dHX01BWF9CVUZGRVJfU0laRSAhPT0gdW5kZWZpbmVkID8gTWF0aC5tYXgoMCwgcGFyc2VJbnQocHJvY2Vzcy5lbnYuU05PT1BMT0dHX01BWF9CVUZGRVJfU0laRSkpIDogMClcblx0XHRcdH0sXG5cblx0XHRcdC8qKlxuXHRcdFx0ICogQW4gYXJyYXkgb2YgYXZhaWxhYmxlIGNvbG9ycyB0byBjaG9vc2UgZnJvbSB3aGVuIHJlbmRlcmluZyBhdXRvLXN0eWxlZCBsYWJlbHMgc3VjaFxuXHRcdFx0ICogYXMgdGhlIG5hbWVzcGFjZS5cblx0XHRcdCAqIEB0eXBlIHtBcnJheS48U3RyaW5nPn1cblx0XHRcdCAqL1xuXHRcdFx0X2NvbG9yczoge1xuXHRcdFx0XHR3cml0YWJsZTogdHJ1ZSxcblx0XHRcdFx0dmFsdWU6IHByb2Nlc3MuZW52LlNOT09QTE9HR19DT0xPUl9MSVNUID8gcHJvY2Vzcy5lbnYuU05PT1BMT0dHX0NPTE9SX0xJU1Quc3BsaXQoJywnKSA6IFtdXG5cdFx0XHR9LFxuXG5cdFx0XHQvKipcblx0XHRcdCAqIFRoZSBkZWZhdWx0IHRoZW1lIHRvIGFwcGx5IGlmIGEgc3RyZWFtIGRpZG4ndCBzcGVjaWZ5IG9uZS5cblx0XHRcdCAqIEB0eXBlIHtTdHJpbmd9XG5cdFx0XHQgKi9cblx0XHRcdF9kZWZhdWx0VGhlbWU6IHsgd3JpdGFibGU6IHRydWUsIHZhbHVlOiBwcm9jZXNzLmVudi5TTk9PUExPR0dfREVGQVVMVF9USEVNRSB8fCAnc3RhbmRhcmQnIH0sXG5cblx0XHRcdC8qKlxuXHRcdFx0ICogQSBsYXp5IHVuaXF1ZSBpZGVudGlmaWVyIGZvciB0aGlzIGBTbm9vcExvZ2dgIGluc3RhbmNlLiBUaGlzIGlzIHVzZWQgdG8gcHJldmVudCB0aGlzXG5cdFx0XHQgKiBpbnN0YW5jZSBmcm9tIHByb2Nlc3NpbmcgaXQncyBvd24gbWVzc2FnZXMuXG5cdFx0XHQgKiBAdHlwZSB7TnVtYmVyfVxuXHRcdFx0ICovXG5cdFx0XHRfaWQ6IHsgdmFsdWU6IE1hdGgucm91bmQoTWF0aC5yYW5kb20oKSAqIDFlOSkgfSxcblxuXHRcdFx0LyoqXG5cdFx0XHQgKiBBIHJlZ2V4IHBhdHRlcm4gb2YgbmFtZXNwYWNlcyB0byBpZ25vcmUuXG5cdFx0XHQgKiBAdHlwZSB7UmVnRXhwfG51bGx9XG5cdFx0XHQgKi9cblx0XHRcdF9pZ25vcmU6IHsgd3JpdGFibGU6IHRydWUsIHZhbHVlOiBudWxsIH0sXG5cblx0XHRcdC8qKlxuXHRcdFx0ICogT3B0aW9ucyB0aGF0IGFyZSBwYXNzZWQgaW50byBgdXRpbC5pbnNwZWN0KClgIHRvIHN0cmluZ2lmeSBvYmplY3RzLiBJZiBzZXQgdG9cblx0XHRcdCAqIGBudWxsYCwgdGhlbiB0aGUgdmFsdWUgaXMgc3RyaW5naWZpZWQgdXNpbmcgTm9kZSdzIGB1dGlsLmZvcm1hdCgpYC5cblx0XHRcdCAqIEB0eXBlIHtPYmplY3R9XG5cdFx0XHQgKi9cblx0XHRcdF9pbnNwZWN0T3B0aW9uczoge1xuXHRcdFx0XHR3cml0YWJsZTogdHJ1ZSxcblx0XHRcdFx0dmFsdWU6IHtcblx0XHRcdFx0XHRicmVha0xlbmd0aDogMCxcblx0XHRcdFx0XHRjb2xvcnM6IHRydWUsXG5cdFx0XHRcdFx0ZGVwdGg6IDQsXG5cdFx0XHRcdFx0c2hvd0hpZGRlbjogZmFsc2Vcblx0XHRcdFx0fVxuXHRcdFx0fSxcblxuXHRcdFx0LyoqXG5cdFx0XHQgKiBUaGUgbWludW11bSBicmlnaHRuZXNzIHdoZW4gYXV0by1zZWxlY3RpbmcgYSBjb2xvci4gRGVmYXVsdHMgdG8gYDgwYC5cblx0XHRcdCAqIEB0eXBlIHtOdW1iZXJ9XG5cdFx0XHQgKi9cblx0XHRcdF9taW5CcmlnaHRuZXNzOiB7XG5cdFx0XHRcdHdyaXRhYmxlOiB0cnVlLFxuXHRcdFx0XHR2YWx1ZTogcHJvY2Vzcy5lbnYuU05PT1BMT0dHX01JTl9CUklHSFRORVNTICE9PSB1bmRlZmluZWQgPyBNYXRoLm1pbigyNTUsIE1hdGgubWF4KDAsIHBhcnNlSW50KHByb2Nlc3MuZW52LlNOT09QTE9HR19NSU5fQlJJR0hUTkVTUykpKSA6IDgwXG5cdFx0XHR9LFxuXG5cdFx0XHQvKipcblx0XHRcdCAqIEEgbGlzdCBvZiBtaWRkbGV3YXJlcyB0byBjYWxsIGFuZCBwcm9jZXNzIGxvZyBtZXNzYWdlcyBwcmlvclxuXHRcdFx0ICogdG8gZGlzcGF0Y2hpbmcuXG5cdFx0XHQgKiBAdHlwZSB7QXJyYXkuPEZ1bmN0aW9uPn1cblx0XHRcdCAqL1xuXHRcdFx0X21pZGRsZXdhcmVzOiB7IHZhbHVlOiBbXSB9LFxuXG5cdFx0XHQvKipcblx0XHRcdCAqIFRoZSBtYXhpbXVtIGJyaWdodG5lc3Mgd2hlbiBhdXRvLXNlbGVjdGluZyBhIGNvbG9yLiBEZWZhdWx0cyB0byBgMjEwYC5cblx0XHRcdCAqIEB0eXBlIHtOdW1iZXJ9XG5cdFx0XHQgKi9cblx0XHRcdF9tYXhCcmlnaHRuZXNzOiB7XG5cdFx0XHRcdHdyaXRhYmxlOiB0cnVlLFxuXHRcdFx0XHR2YWx1ZTogcHJvY2Vzcy5lbnYuU05PT1BMT0dHX01BWF9CUklHSFRORVNTICE9PSB1bmRlZmluZWQgPyBNYXRoLm1pbigyNTUsIE1hdGgubWF4KDAsIHBhcnNlSW50KHByb2Nlc3MuZW52LlNOT09QTE9HR19NQVhfQlJJR0hUTkVTUykpKSA6IDIxMFxuXHRcdFx0fSxcblxuXHRcdFx0LyoqXG5cdFx0XHQgKiBBIGxpc3Qgb2Ygb2JqZWN0cyBjb250YWluaW5nIHRoZSBzdHJlYW0gYW5kIHRoZW1lIG5hbWUuXG5cdFx0XHQgKiBAdHlwZSB7QXJyYXkuPE9iamVjdD59XG5cdFx0XHQgKi9cblx0XHRcdF9zdHJlYW1zOiB7IHZhbHVlOiBbXSB9LFxuXG5cdFx0XHQvKipcblx0XHRcdCAqIEEgbWFwIG9mIHN0eWxlIG5hbWVzIGFuZCB0aGVpciBmdW5jdGlvbnMuXG5cdFx0XHQgKiBAdHlwZSB7T2JqZWN0fVxuXHRcdFx0ICovXG5cdFx0XHRzdHlsZXM6IHsgZW51bWVyYWJsZTogdHJ1ZSwgdmFsdWU6IHt9IH0sXG5cblx0XHRcdC8qKlxuXHRcdFx0ICogQSBsaXN0IG9mIHRoZW1lcyBhbmQgdGhlIGZ1bmN0aW9uIHRvIGFwcGx5IHRoZW0uXG5cdFx0XHQgKiBAdHlwZSB7T2JqZWN0LjxTdHJpbmcsRnVuY3Rpb24+fVxuXHRcdFx0ICovXG5cdFx0XHRfdGhlbWVzOiB7IHZhbHVlOiB7fSB9LFxuXG5cdFx0XHQvKipcblx0XHRcdCAqIEEgbWFwIG9mIGFsbCByZWdpc3RlcmVkIGxvZyB0eXBlcy5cblx0XHRcdCAqIEB0eXBlIHtPYmplY3QuPFN0cmluZywgTnVtYmVyPn1cblx0XHRcdCAqL1xuXHRcdFx0X3R5cGVzOiB7IHZhbHVlOiB7fSB9LFxuXG5cdFx0XHQvKipcblx0XHRcdCAqIFJlLWV4cG9ydCBvZiB0aGUgYGNoYWxrYCBsaWJyYXJ5LlxuXHRcdFx0ICogQHR5cGUge09iamVjdH1cblx0XHRcdCAqL1xuXHRcdFx0Y2hhbGs6IHtcblx0XHRcdFx0ZW51bWVyYWJsZTogdHJ1ZSxcblx0XHRcdFx0dmFsdWU6IGNoYWxrXG5cdFx0XHR9XG5cdFx0fSk7XG5cblx0XHQvLyBUaGlzIGlzIHdoZXJlIHRoaW5ncyBnZXQgY29tcGxpY2F0ZWQuLi5cblx0XHQvL1xuXHRcdC8vIFRoZSBwcm90b3R5cGUgY2hhaW4gYXQgdGhpcyBwb2ludCBsb29rcyBsaWtlIHRoaXM6XG5cdFx0Ly9cblx0XHQvLyAgICBgU25vb3BMb2dnLnByb3RvdHlwZWBcblx0XHQvLyAgICAgIGBMb2dnZXIucHJvdG90eXBlYFxuXHRcdC8vICAgICAgICBgRnVuY3Rpb25hdG9yLnByb3RvdHlwZWBcblx0XHQvLyAgICAgICAgICBgT2JqZWN0LnByb3RvdHlwZWBcblx0XHQvL1xuXHRcdC8vIFdlIHdhbnQgYHR5cGUoKWAgdG8gZHluYW1pY2FsbHkgYWRkIG5ldyBsb2cgZnVuY3Rpb25zIHRvIGBMb2dnZXIucHJvdG90eXBlYCBzbyB0aGF0XG5cdFx0Ly8gZXZlcnkgbmFtZXNwYWNlIHVuZGVyIGEgc3BlY2lmaWMgYFNub29wTG9nZ2AgaW5zdGFuY2UgY2FuIHVzZSBpdCwgYnV0IHdlIGRvbid0IHdhbnRcblx0XHQvLyB0aGUgbmV3IGxvZyBmdW5jdGlvbnMgYWRkZWQgdG8gZXZlcnkgYFNub29wTG9nZ2AgaW5zdGFuY2UuXG5cdFx0Ly9cblx0XHQvLyBXZSBuZWVkIHRvIGdlbmVyYXRlIGEgbmV3IGBMb2dnZXIucHJvdG90eXBlYCBhbmQgc3dhcCBvdXQgdGhlIG9yaWdpbmFsIGluIHRoaXNcblx0XHQvLyBpbnN0YW5jZSdzIHByb3RvdHlwZSBmb3IgYSBjbG9uZWQgYExvZ2dlci5wcm90b3R5cGVgIHRoYXQgYHR5cGUoKWAgY2FuIG1vZGlmeS4gVG8gbWFrZVxuXHRcdC8vIHRoaW5ncyBtb3JlIGNvbXBsaWNhdGVkLCB5b3UgY2FuJ3QganVzdCBzd2FwIG91dCB0aGUgYExvZ2dlci5wcm90b3R5cGVgIGJlY2F1c2UgaXQnc1xuXHRcdC8vIHVuZGVyIGBTbm9vcExvZ2cucHJvdG90eXBlYCBhbmQgdGhhdCB3b3VsZCBhZmZlY3QgZXZlcnkgYFNub29wTG9nZ2AgaW5zdGFuY2UuXG5cdFx0Ly9cblx0XHQvLyBXaGF0IHdlIG5lZWQgdG8gZG8gaXMgY3JlYXRlIGEgbmV3IGBMb2dnZXIucHJvdG90eXBlYCBhbmQgY2FjaGUgaXQgc28gbmVzdGVkIG5hbWVzcGFjZWRcblx0XHQvLyBgTG9nZ2VyYCBpbnN0YW5jZXMgY2FuIHJlZmVyZW5jZSBpdC4gVGhlbiB3ZSBuZWVkIHRvIGEgZ2VuZXJhdGUgYSBuZXcgYFNub29wTG9nZ2Bcblx0XHQvLyBwcm90b3R5cGUgdGhhdCBleHRlbmRzIHRoZSBnZW5lcmF0ZWQgYExvZ2dlci5wcm90b3R5cGVgIGFuZCBzZXQgdGhlIHByb3RvdHlwZSBvZiB0aGlzXG5cdFx0Ly8gaW5zdGFuY2UgdG8gaXQuXG5cdFx0Ly9cblx0XHQvLyAgICBDbG9uZWQgYFNub29wTG9nZy5wcm90b3R5cGVgXG5cdFx0Ly8gICAgICBDbG9uZWQgYW5kIGNhY2hlZCBgTG9nZ2VyLnByb3RvdHlwZWBcblx0XHQvLyAgICAgICAgJ0Z1bmN0aW9uYXRvci5wcm90b3R5cGVgXG5cdFx0Ly8gICAgICAgICAgJ09iamVjdC5wcm90b3R5cGUnXG5cblx0XHR0aGlzLnByb3RvID0gT2JqZWN0LmNyZWF0ZShGdW5jdGlvbmF0b3IsIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKExvZ2dlci5wcm90b3R5cGUpKTtcblx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcy5wcm90bywgJ19faWQnLCB7IHZhbHVlOiB0aGlzLl9pZCB9KTtcblxuXHRcdE9iamVjdC5zZXRQcm90b3R5cGVPZih0aGlzLCBPYmplY3QuY3JlYXRlKHRoaXMucHJvdG8sIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKFNub29wTG9nZy5wcm90b3R5cGUpKSk7XG5cblx0XHRpZiAob3B0cykge1xuXHRcdFx0dGhpcy5jb25maWcob3B0cyk7XG5cdFx0fVxuXHR9XG5cblx0LyoqXG5cdCAqIFN0eWxpemVzIHRleHQuXG5cdCAqXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSBzdHlsZSAtIEEgY29tbWEtc2VwYXJhdGVkIGxpc3Qgb2Ygc3R5bGVzIHRvIGFwcGx5LlxuXHQgKiBAcGFyYW0geyp9IHRleHQgLSBUaGUgc3RyaW5nIHRvIHN0eWxpemUuXG5cdCAqIEByZXR1cm5zIHtTdHJpbmd9XG5cdCAqIEBhY2Nlc3MgcHJpdmF0ZVxuXHQgKi9cblx0YXBwbHlTdHlsZShzdHlsZSwgdGV4dCkge1xuXHRcdGlmIChzdHlsZSAmJiB0ZXh0KSB7XG5cdFx0XHRyZXR1cm4gc3R5bGUuc3BsaXQoJywnKS5yZWR1Y2UoKHRleHQsIHN0eWxlKSA9PiB0aGlzLnN0eWxlc1tzdHlsZV0gPyB0aGlzLnN0eWxlc1tzdHlsZV0odGV4dCkgOiB0ZXh0LCBTdHJpbmcodGV4dCkpO1xuXHRcdH1cblx0XHRyZXR1cm4gdGV4dDtcblx0fVxuXG5cdC8qKlxuXHQgKiBBbGxvd3Mgc2V0dGluZ3MgdG8gYmUgY2hhbmdlZC5cblx0ICpcblx0ICogQHBhcmFtIHtPYmplY3R9IFtvcHRzXSAtIFZhcmlvdXMgb3B0aW9ucy5cblx0ICogQHBhcmFtIHtTdHJpbmd8QXJyYXkuPFN0cmluZz59IFtvcHRzLmNvbG9yc10gLSBBbiBhcnJheSBvciBjb21tYS1zZXBhcmF0ZWQgbGlzdCBvZiBjb2xvcnMgdG9cblx0ICogY2hvb3NlIGZyb20gd2hlbiBhdXRvLXN0eWxpbmcuXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0cy5pbnNwZWN0T3B0aW9uc10gLSBPcHRpb25zIHRvIHBhc3MgaW50byBgdXRpbC5pbnNwZWN0KClgIHdoZW5cblx0ICogc3RyaW5naWZ5aW5nIG9iamVjdHMuIFNldCB0byBgbnVsbGAgdG8gc3RyaW5naWZ5IG9iamVjdHMgdXNpbmcgTm9kZSdzIGB1dGlsLmZvcm1hdCgpYC5cblx0ICogQHBhcmFtIHtOdW1iZXJ9IFtvcHRzLm1heEJ1ZmZlclNpemVdIC0gVGhlIG1heCBidWZmZXIgc2l6ZS5cblx0ICogQHJldHVybnMge1Nub29wTG9nZ31cblx0ICogQGFjY2VzcyBwdWJsaWNcblx0ICovXG5cdGNvbmZpZyhvcHRzID0ge30pIHtcblx0XHRpZiAoIW9wdHMgfHwgdHlwZW9mIG9wdHMgIT09ICdvYmplY3QnKSB7XG5cdFx0XHR0aHJvdyBuZXcgVHlwZUVycm9yKCdFeHBlY3RlZCBjb25maWcgb3B0aW9ucyB0byBiZSBhbiBvYmplY3QnKTtcblx0XHR9XG5cblx0XHRpZiAob3B0cy5jb2xvcnMpIHtcblx0XHRcdGlmICh0eXBlb2Ygb3B0cy5jb2xvcnMgIT09ICdzdHJpbmcnICYmICFBcnJheS5pc0FycmF5KG9wdHMuY29sb3JzKSkge1xuXHRcdFx0XHR0aHJvdyBuZXcgVHlwZUVycm9yKCdFeHBlY3RlZCBjb2xvcnMgdG8gYmUgYSBzdHJpbmcgb3IgYXJyYXknKTtcblx0XHRcdH1cblx0XHRcdHRoaXMuX2NvbG9ycyA9IHR5cGVvZiBvcHRzLmNvbG9ycyA9PT0gJ3N0cmluZycgPyBvcHRzLmNvbG9ycy5zcGxpdCgnLCcpIDogb3B0cy5jb2xvcnM7XG5cdFx0fVxuXG5cdFx0aWYgKG9wdHMuaW5zcGVjdE9wdGlvbnMpIHtcblx0XHRcdGlmICh0eXBlb2Ygb3B0cy5pbnNwZWN0T3B0aW9ucyAhPT0gJ29iamVjdCcpIHtcblx0XHRcdFx0dGhyb3cgbmV3IFR5cGVFcnJvcignRXhwZWN0ZWQgaW5zcGVjdCBvcHRpb25zIHRvIGJlIGFuIG9iamVjdCcpO1xuXHRcdFx0fVxuXHRcdFx0dGhpcy5faW5zcGVjdE9wdGlvbnMgPSBvcHRzLmluc3BlY3RPcHRpb25zO1xuXHRcdH1cblxuXHRcdGlmIChvcHRzLm1pbkJyaWdodG5lc3MpIHtcblx0XHRcdGlmICh0eXBlb2Ygb3B0cy5taW5CcmlnaHRuZXNzICE9PSAnbnVtYmVyJykge1xuXHRcdFx0XHR0aHJvdyBuZXcgVHlwZUVycm9yKCdFeHBlY3RlZCBtaW5pbXVtIGJyaWdodG5lc3MgdG8gYmUgYSBudW1iZXInKTtcblx0XHRcdH1cblx0XHRcdGlmIChvcHRzLm1pbkJyaWdodG5lc3MgPCAwIHx8IG9wdHMubWluQnJpZ2h0bmVzcyA+IDI1NSkge1xuXHRcdFx0XHR0aHJvdyBuZXcgUmFuZ2VFcnJvcignTWluaW11bSBicmlnaHRuZXNzIG11c3QgYmUgYmV0d2VlbiAwIGFuZCAyNTUnKTtcblx0XHRcdH1cblx0XHRcdHRoaXMuX21pbkJyaWdodG5lc3MgPSBvcHRzLm1pbkJyaWdodG5lc3M7XG5cdFx0fVxuXG5cdFx0aWYgKG9wdHMubWF4QnJpZ2h0bmVzcykge1xuXHRcdFx0aWYgKHR5cGVvZiBvcHRzLm1heEJyaWdodG5lc3MgIT09ICdudW1iZXInKSB7XG5cdFx0XHRcdHRocm93IG5ldyBUeXBlRXJyb3IoJ0V4cGVjdGVkIG1heGltdW0gYnJpZ2h0bmVzcyB0byBiZSBhIG51bWJlcicpO1xuXHRcdFx0fVxuXHRcdFx0aWYgKG9wdHMubWF4QnJpZ2h0bmVzcyA8IDAgfHwgb3B0cy5tYXhCcmlnaHRuZXNzID4gMjU1KSB7XG5cdFx0XHRcdHRocm93IG5ldyBSYW5nZUVycm9yKCdNYXhpbXVtIGJyaWdodG5lc3MgbXVzdCBiZSBiZXR3ZWVuIDAgYW5kIDI1NScpO1xuXHRcdFx0fVxuXHRcdFx0aWYgKG9wdHMubWF4QnJpZ2h0bmVzcyA8IHRoaXMuX21pbkJyaWdodG5lc3MpIHtcblx0XHRcdFx0dGhyb3cgbmV3IFJhbmdlRXJyb3IoJ01heGltdW0gYnJpZ2h0bmVzcyBtdXN0IGdyZWF0ZXIgdGhhbiBvciBlcXVhbCB0byB0aGUgbWluaW11bSBicmlnaHRuZXNzJyk7XG5cdFx0XHR9XG5cdFx0XHR0aGlzLl9tYXhCcmlnaHRuZXNzID0gb3B0cy5tYXhCcmlnaHRuZXNzO1xuXHRcdH1cblxuXHRcdGlmIChvcHRzLnRoZW1lKSB7XG5cdFx0XHRpZiAodHlwZW9mIG9wdHMudGhlbWUgIT09ICdzdHJpbmcnKSB7XG5cdFx0XHRcdHRocm93IG5ldyBUeXBlRXJyb3IoJ0V4cGVjdGVkIHRoZW1lIHRvIGJlIGEgc3RyaW5nJyk7XG5cdFx0XHR9XG5cdFx0XHR0aGlzLl9kZWZhdWx0VGhlbWUgPSBvcHRzLnRoZW1lO1xuXHRcdH1cblxuXHRcdGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob3B0cywgJ21heEJ1ZmZlclNpemUnKSkge1xuXHRcdFx0dHJ5IHtcblx0XHRcdFx0dGhpcy5fYnVmZmVyLm1heFNpemUgPSBvcHRzLm1heEJ1ZmZlclNpemU7XG5cdFx0XHR9IGNhdGNoIChlKSB7XG5cdFx0XHRcdGxldCBlcnIgPSBlO1xuXHRcdFx0XHRpZiAoZSBpbnN0YW5jZW9mIFR5cGVFcnJvcikge1xuXHRcdFx0XHRcdGVyciA9IG5ldyBUeXBlRXJyb3IoYEludmFsaWQgbWF4IGJ1ZmZlciBzaXplOiAke2UubWVzc2FnZX1gKTtcblx0XHRcdFx0fSBlbHNlIGlmIChlIGluc3RhbmNlb2YgUmFuZ2VFcnJvcikge1xuXHRcdFx0XHRcdGVyciA9IG5ldyBSYW5nZUVycm9yKGBJbnZhbGlkIG1heCBidWZmZXIgc2l6ZTogJHtlLm1lc3NhZ2V9YCk7XG5cdFx0XHRcdH1cblx0XHRcdFx0dGhyb3cgZXJyO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdHJldHVybiB0aGlzO1xuXHR9XG5cblx0LyoqXG5cdCAqIERpc3BhdGNoZXMgYSBtZXNzYWdlIG9iamVjdCB0aHJvdWdoIHRoZSBtaWRkbGV3YXJlcywgZmlsdGVycywgYW5kIGV2ZW50dWFsbHkgdG8gYWxsIG91dHB1dFxuXHQgKiBzdHJlYW1zLlxuXHQgKlxuXHQgKiBAcGFyYW0ge09iamVjdH0gbXNnIC0gQSBtZXNzYWdlIG9iamVjdC5cblx0ICogQHBhcmFtIHtBcnJheX0gbXNnLmFyZ3MgLSBBbiBhcnJheSBvZiB6ZXJvIG9yIG1vcmUgYXJndW1lbnRzIHRoYXQgd2lsbCBiZSBmb3JtYXR0ZWQgaW50byB0aGVcblx0ICogZmluYWwgbG9nIG1lc3NhZ2UuXG5cdCAqIEBhY2Nlc3MgcHVibGljXG5cdCAqL1xuXHRkaXNwYXRjaChtc2cpIHtcblx0XHRpZiAoIW1zZyB8fCB0eXBlb2YgbXNnICE9PSAnb2JqZWN0Jykge1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHRcdGlmICghQXJyYXkuaXNBcnJheShtc2cuYXJncykpIHtcblx0XHRcdHRocm93IG5ldyBUeXBlRXJyb3IoJ0V4cGVjdGVkIGFyZ3MgdG8gYmUgYW4gYXJyYXknKTtcblx0XHR9XG5cblx0XHQvLyBydW4gYWxsIG1pZGRsZXdhcmVcblx0XHRmb3IgKGNvbnN0IHsgZm4gfSBvZiB0aGlzLl9taWRkbGV3YXJlcykge1xuXHRcdFx0bXNnID0gZm4obXNnKSB8fCBtc2c7XG5cdFx0fVxuXG5cdFx0Ly8gYWRkIHRoZSBtZXNzYWdlIHRvIHRoZSBidWZmZXJcblx0XHR0aGlzLl9idWZmZXIucHVzaChtc2cpO1xuXG5cdFx0aWYgKChtc2cuaWQgPT09IHRoaXMuX2lkICYmIG1zZy5lbmFibGVkKSB8fCAobXNnLmlkICE9PSB0aGlzLl9pZCAmJiB0aGlzLmlzRW5hYmxlZChtc2cubnMpKSkge1xuXHRcdFx0Zm9yIChjb25zdCBzIG9mIHRoaXMuX3N0cmVhbXMpIHtcblx0XHRcdFx0bXNnLmZvcm1hdHRlciA9IHRoaXMuX3RoZW1lc1tzLnRoZW1lXSB8fCB0aGlzLl90aGVtZXNbdGhpcy5fZGVmYXVsdFRoZW1lXTtcblx0XHRcdFx0cy5zdHJlYW0ud3JpdGUocy5zdHJlYW0uX3dyaXRhYmxlU3RhdGUgJiYgcy5zdHJlYW0uX3dyaXRhYmxlU3RhdGUub2JqZWN0TW9kZSA/IG1zZyA6IGZvcm1hdChtc2cpKTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHRpZiAobXNnLmlkID09PSB0aGlzLl9pZCkge1xuXHRcdFx0cHJvY2Vzcy5lbWl0KCdzbm9vcGxvZ2cnLCBtc2cpO1xuXHRcdH1cblx0fVxuXG5cdC8qKlxuXHQgKiBFbmFibGVzIGxvZyBvdXRwdXQgZm9yIHRoZSBnaXZlbiBwYXR0ZXJuLlxuXHQgKlxuXHQgKiBAcGFyYW0ge1N0cmluZ30gW3BhdHRlcm5dIC0gQSBzdHJpbmcgd2l0aCBvbmUgb3IgbW9yZSBjb21tYS1zZXBhcmF0ZWQgbmFtZXNwYWNlcyB0byBlbmFibGVcblx0ICogbG9nZ2luZyBmb3IuIElmIHRoZSBzdHJpbmcgaXMgZW1wdHkgb3IgbnVsbCwgdGhlbiBhbGwgbG9nIG91dHB1dCB3aWxsIGJlIHNpbGVuY2VkLiBJZiB0aGVcblx0ICogcGF0dGVybiBpcyBgKmAsIHRoZW4gYWxsIGxvZyBtZXNzYWdlcyB3aWxsIGJlIGRpc3BsYXllZC5cblx0ICogQHJldHVybnMge1Nub29wTG9nZ31cblx0ICogQGFjY2VzcyBwdWJsaWNcblx0ICovXG5cdGVuYWJsZShwYXR0ZXJuID0gJycpIHtcblx0XHRpZiAocGF0dGVybiAmJiB0eXBlb2YgcGF0dGVybiAhPT0gJ3N0cmluZycgJiYgIShwYXR0ZXJuIGluc3RhbmNlb2YgUmVnRXhwKSkge1xuXHRcdFx0dGhyb3cgbmV3IFR5cGVFcnJvcignRXhwZWN0ZWQgcGF0dGVybiB0byBiZSBhIHN0cmluZyBvciByZWdleCcpO1xuXHRcdH1cblxuXHRcdHRoaXMuX2FsbG93ID0gbnVsbDtcblx0XHR0aGlzLl9pZ25vcmUgPSBudWxsO1xuXG5cdFx0aWYgKHBhdHRlcm4gPT09ICcqJykge1xuXHRcdFx0dGhpcy5fYWxsb3cgPSAnKic7XG5cblx0XHR9IGVsc2UgaWYgKHBhdHRlcm4gaW5zdGFuY2VvZiBSZWdFeHApIHtcblx0XHRcdHRoaXMuX2FsbG93ID0gcGF0dGVybjtcblxuXHRcdH0gZWxzZSBpZiAocGF0dGVybikge1xuXHRcdFx0Y29uc3QgYWxsb3dzID0gW107XG5cdFx0XHRjb25zdCBpZ25vcmVzID0gW107XG5cblx0XHRcdGZvciAobGV0IHAgb2YgcGF0dGVybi5zcGxpdCgvW1xccyxdKy8pKSB7XG5cdFx0XHRcdGlmIChwKSB7XG5cdFx0XHRcdFx0cCA9IHAucmVwbGFjZSgvXFwqL2csICcuKj8nKTtcblx0XHRcdFx0XHRpZiAocFswXSA9PT0gJy0nKSB7XG5cdFx0XHRcdFx0XHRpZ25vcmVzLnB1c2gocC5zbGljZSgxKSk7XG5cdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdGFsbG93cy5wdXNoKHApO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fVxuXG5cdFx0XHRpZiAoYWxsb3dzLmxlbmd0aCkge1xuXHRcdFx0XHR0aGlzLl9hbGxvdyA9IG5ldyBSZWdFeHAoYF4oJHthbGxvd3Muam9pbignfCcpfSkkYCk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHR0aGlzLl9hbGxvdyA9IC8uLztcblx0XHRcdH1cblxuXHRcdFx0aWYgKGlnbm9yZXMubGVuZ3RoKSB7XG5cdFx0XHRcdHRoaXMuX2lnbm9yZSA9IG5ldyBSZWdFeHAoYF4oJHtpZ25vcmVzLmpvaW4oJ3wnKX0pJGApO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdHJldHVybiB0aGlzO1xuXHR9XG5cblx0LyoqXG5cdCAqIERldGVybWluZXMgaWYgdGhlIHNwZWNpZmllZCBuYW1lc3BhY2UgaXMgZW5hYmxlZC5cblx0ICpcblx0ICogQHBhcmFtIHs/U3RyaW5nfSBuYW1lc3BhY2UgLSBUaGUgbmFtZXNwYWNlLlxuXHQgKiBAcmV0dXJucyB7Qm9vbGVhbn1cblx0ICogQGFjY2VzcyBwdWJsaWNcblx0ICovXG5cdGlzRW5hYmxlZChuYW1lc3BhY2UpIHtcblx0XHRjb25zdCBhbGxvdyA9IHRoaXMuX2FsbG93O1xuXHRcdGlmIChhbGxvdyA9PT0gbnVsbCkge1xuXHRcdFx0Ly8gYWxsIGxvZ2dpbmcgaXMgc2lsZW5jZWRcblx0XHRcdHJldHVybiBmYWxzZTtcblx0XHR9XG5cblx0XHRpZiAoIW5hbWVzcGFjZSB8fCBhbGxvdyA9PT0gJyonKSB7XG5cdFx0XHQvLyBub3RoaW5nIHRvIGZpbHRlclxuXHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0fVxuXG5cdFx0Y29uc3QgaWdub3JlID0gdGhpcy5faWdub3JlO1xuXHRcdGlmIChhbGxvdyAmJiBhbGxvdy50ZXN0KG5hbWVzcGFjZSkgJiYgKCFpZ25vcmUgfHwgIWlnbm9yZS50ZXN0KG5hbWVzcGFjZSkpKSB7XG5cdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHR9XG5cblx0XHRyZXR1cm4gZmFsc2U7XG5cdH1cblxuXHQvKipcblx0ICogRXhwbGljaXQgd2F5IG9mIGNyZWF0aW5nIGEgbmFtZXNwYWNlLiBgc25vb3Bsb2dnKCdmb29cIilgIGFuZCBgc25vb3Bsb2dnLm5zKCdmb28nKWAgYXJlXG5cdCAqIGVxdWl2YWxlbnQuXG5cdCAqXG5cdCAqIEBwYXJhbSB7P1N0cmluZ30gW25hbWVzcGFjZV0gLSBUaGUgbmFtZSBmb3IgdGhpcyBsb2dnZXIgaW5zdGFuY2UuXG5cdCAqIEByZXR1cm5zIHtMb2dnZXJ9XG5cdCAqIEBhY2Nlc3MgcHVibGljXG5cdCAqL1xuXHRucyhuYW1lc3BhY2UpIHtcblx0XHRpZiAoIXRoaXMuX25hbWVzcGFjZXNbbmFtZXNwYWNlXSkge1xuXHRcdFx0dGhpcy5fbmFtZXNwYWNlc1tuYW1lc3BhY2VdID0gYmluZChPYmplY3Quc2V0UHJvdG90eXBlT2YobmV3IExvZ2dlcihuYW1lc3BhY2UsIHRoaXMsIHRoaXMpLCB0aGlzLnByb3RvKSk7XG5cdFx0fVxuXHRcdHJldHVybiB0aGlzLl9uYW1lc3BhY2VzW25hbWVzcGFjZV07XG5cdH1cblxuXHQvKipcblx0ICogQWRkcyBhIHN0cmVhbSB0byBwaXBlIGxvZyBtZXNzYWdlcyB0by5cblx0ICpcblx0ICogQHBhcmFtIHtzdHJlYW0uV3JpdGFibGV9IHN0cmVhbSAtIFRoZSBzdHJlYW0gdG8gcGlwZSBtZXNzYWdlcyB0by5cblx0ICogQHBhcmFtIHtPYmplY3R9IFtvcHRzXSAtIFZhcmlvdXMgb3B0aW9ucy5cblx0ICogQHBhcmFtIHtCb29sZWFufSBbb3B0cy5mbHVzaD1mYWxzZV0gLSBXaGVuIHRydWUsIGltbWVkaWF0ZWx5IGZsdXNoZXMgdGhlIGJ1ZmZlciBvZiBsb2dcblx0ICogbWVzc2FnZXMgdG8gdGhlIHN0cmVhbS5cblx0ICogQHBhcmFtIHtTdHJpbmd9IFtvcHRzLnRoZW1lXSAtIFRoZSB0aGVtZSB0byBhcHBseSB0byBhbGwgbWVzc2FnZXMgd3JpdHRlbiB0byB0aGlzIHN0cmVhbS5cblx0ICogQHJldHVybnMge1Nub29wTG9nZ31cblx0ICogQGFjY2VzcyBwdWJsaWNcblx0ICovXG5cdHBpcGUoc3RyZWFtLCBvcHRzID0ge30pIHtcblx0XHRpZiAoIXN0cmVhbSkge1xuXHRcdFx0dGhyb3cgbmV3IFR5cGVFcnJvcignSW52YWxpZCBzdHJlYW0nKTtcblx0XHR9XG5cblx0XHRpZiAob3B0cyAmJiB0eXBlb2Ygb3B0cyAhPT0gJ29iamVjdCcpIHtcblx0XHRcdHRocm93IG5ldyBUeXBlRXJyb3IoJ0V4cGVjdGVkIG9wdGlvbnMgdG8gYmUgYW4gb2JqZWN0Jyk7XG5cdFx0fVxuXG5cdFx0Ly8gZG9uJ3QgYWRkIHRoZSBzdHJlYW0gdHdpY2Vcblx0XHRmb3IgKGNvbnN0IHMgb2YgdGhpcy5fc3RyZWFtcykge1xuXHRcdFx0aWYgKHMuc3RyZWFtID09PSBzdHJlYW0pIHtcblx0XHRcdFx0cmV0dXJuIHRoaXM7XG5cdFx0XHR9XG5cdFx0fVxuXHRcdHRoaXMuX3N0cmVhbXMucHVzaCh7IHN0cmVhbSwgdGhlbWU6IG9wdHMudGhlbWUgfSk7XG5cblx0XHQvLyBsaXN0ZW4gaWYgdGhlIHN0cmVhbSBlbmRzIHNvIHdlIGNhbiByZW1vdmUgaXRcblx0XHRzdHJlYW0ub24oJ2VuZCcsICgpID0+IHtcblx0XHRcdGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5fc3RyZWFtcy5sZW5ndGg7IGkrKykge1xuXHRcdFx0XHRpZiAodGhpcy5fc3RyZWFtc1tpXS5zdHJlYW0gPT09IHN0cmVhbSkge1xuXHRcdFx0XHRcdHRoaXMuX3N0cmVhbXMuc3BsaWNlKGktLSwgMSk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9KTtcblxuXHRcdC8vIGZsdXNoIHRoZSBidWZmZXJzXG5cdFx0aWYgKG9wdHMuZmx1c2gpIHtcblx0XHRcdGZvciAoY29uc3QgbXNnIG9mIHRoaXMuX2J1ZmZlcikge1xuXHRcdFx0XHRpZiAoKG1zZy5pZCA9PT0gdGhpcy5faWQgJiYgbXNnLmVuYWJsZWQpIHx8IChtc2cuaWQgIT09IHRoaXMuX2lkICYmIHRoaXMuaXNFbmFibGVkKG1zZy5ucykpKSB7XG5cdFx0XHRcdFx0bXNnLmZvcm1hdHRlciA9IG9wdHMudGhlbWUgJiYgdGhpcy5fdGhlbWVzW29wdHMudGhlbWVdIHx8IHRoaXMuX3RoZW1lc1t0aGlzLl9kZWZhdWx0VGhlbWVdO1xuXHRcdFx0XHRcdHN0cmVhbS53cml0ZShzdHJlYW0uX3dyaXRhYmxlU3RhdGUgJiYgc3RyZWFtLl93cml0YWJsZVN0YXRlLm9iamVjdE1vZGUgPyBtc2cgOiBmb3JtYXQobXNnKSk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cblx0XHRyZXR1cm4gdGhpcztcblx0fVxuXG5cdC8qKlxuXHQgKiBTdGFydHMgbGlzdGVuZW5pbmcgZm9yIGV2ZW50cyBmcm9tIG90aGVyIFNub29wTG9nZyBpbnN0YW5jZXMuXG5cdCAqXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSBbbnNQcmVmaXhdIC0gQW4gb3B0aW9uYWwgbGFiZWwgdG8gcHJlcGVuZCB0byB0aGUgbmFtZXNwYWNlIGZvciBsb2cgbWVzc2FnZXNcblx0ICogZnJvbSBvdGhlciBTbm9vcExvZ2cgaW5zdGFuY2VzLlxuXHQgKiBAcmV0dXJucyB7U25vb3BMb2dnfVxuXHQgKiBAYWNjZXNzIHB1YmxpY1xuXHQgKi9cblx0c25vb3AobnNQcmVmaXgpIHtcblx0XHRpZiAobnNQcmVmaXggJiYgdHlwZW9mIG5zUHJlZml4ICE9PSAnc3RyaW5nJykge1xuXHRcdFx0dGhyb3cgbmV3IFR5cGVFcnJvcignRXhwZWN0ZWQgbmFtZXNwYWNlIHByZWZpeCB0byBiZSBhIHN0cmluZycpO1xuXHRcdH1cblxuXHRcdHRoaXMudW5zbm9vcCgpO1xuXG5cdFx0dGhpcy5vblNub29wTWVzc2FnZSA9IG1zZyA9PiB7XG5cdFx0XHRpZiAobXNnLmlkICE9PSB0aGlzLl9pZCkge1xuXHRcdFx0XHRpZiAobnNQcmVmaXgpIHtcblx0XHRcdFx0XHRtc2cgPSBPYmplY3QuYXNzaWduKHt9LCBtc2cpO1xuXHRcdFx0XHRcdG1zZy5ucyA9IG5zUHJlZml4ICsgKG1zZy5ucyB8fCAnJyk7XG5cdFx0XHRcdH1cblx0XHRcdFx0dGhpcy5kaXNwYXRjaChtc2cpO1xuXHRcdFx0fVxuXHRcdH07XG5cblx0XHRwcm9jZXNzLm9uKCdzbm9vcGxvZ2cnLCB0aGlzLm9uU25vb3BNZXNzYWdlKTtcblxuXHRcdHJldHVybiB0aGlzO1xuXHR9XG5cblx0LyoqXG5cdCAqIEVuYWJsZXMgYWxsIG5hbWVzcGFjZXMgZWZmZWN0aXZlbHkgYWxsb3dpbmcgYWxsIGxvZ2dpbmcgdG8gYmUgd3JpdHRlbiB0byBzdGRvdXQvc3RkZXJyLlxuXHQgKlxuXHQgKiBAcmV0dXJucyB7U25vb3BMb2dnfVxuXHQgKiBAYWNjZXNzIHB1YmxpY1xuXHQgKi9cblx0Z2V0IHN0ZGlvKCkge1xuXHRcdHJldHVybiB0aGlzLmVuYWJsZSgnKicpO1xuXHR9XG5cblx0LyoqXG5cdCAqIFJlZ2lzdGVycyBhIGZ1bmN0aW9uIHRoYXQgYXBwbGllcyBhIHN0eWxlIHRvIGEgbWVzc2FnZS5cblx0ICpcblx0ICogQHBhcmFtIHtTdHJpbmd9IG5hbWUgLSBUaGUgbmFtZSBvZiB0aGUgc3R5bGUuXG5cdCAqIEBwYXJhbSB7RnVuY3Rpb259IGZuIC0gQSBmdW5jdGlvbiB0byBjYWxsIHRoYXQgYXBwbGllcyB0aGUgc3R5bGUuXG5cdCAqIEByZXR1cm5zIHtTbm9vcExvZ2d9XG5cdCAqIEBhY2Nlc3MgcHVibGljXG5cdCAqL1xuXHRzdHlsZShuYW1lLCBmbikge1xuXHRcdGlmICghbmFtZSB8fCB0eXBlb2YgbmFtZSAhPT0gJ3N0cmluZycpIHtcblx0XHRcdHRocm93IG5ldyBUeXBlRXJyb3IoJ0V4cGVjdGVkIG5hbWUgdG8gYmUgYSBzdHJpbmcnKTtcblx0XHR9XG5cblx0XHRpZiAoIWZuIHx8IHR5cGVvZiBmbiAhPT0gJ2Z1bmN0aW9uJykge1xuXHRcdFx0dGhyb3cgbmV3IFR5cGVFcnJvcignRXhwZWN0ZWQgZm4gdG8gYmUgYSBmdW5jdGlvbicpO1xuXHRcdH1cblxuXHRcdHRoaXMuc3R5bGVzW25hbWVdID0gZm4uYmluZCh0aGlzKTtcblxuXHRcdHJldHVybiB0aGlzO1xuXHR9XG5cblx0LyoqXG5cdCAqIFJlZ2lzdGVycyBhIGZ1bmN0aW9uIHRoYXQgYXBwbGllcyBhIHRoZW1lIHRvIGEgbWVzc2FnZS5cblx0ICpcblx0ICogQHBhcmFtIHtTdHJpbmd9IG5hbWUgLSBUaGUgbmFtZSBvZiB0aGUgdGhlbWUuXG5cdCAqIEBwYXJhbSB7RnVuY3Rpb259IGZuIC0gQSBmdW5jdGlvbiB0byBjYWxsIHRoYXQgYXBwbGllcyB0aGUgdGhlbWUuXG5cdCAqIEByZXR1cm5zIHtTbm9vcExvZ2d9XG5cdCAqIEBhY2Nlc3MgcHVibGljXG5cdCAqL1xuXHR0aGVtZShuYW1lLCBmbikge1xuXHRcdGlmICghbmFtZSB8fCB0eXBlb2YgbmFtZSAhPT0gJ3N0cmluZycpIHtcblx0XHRcdHRocm93IG5ldyBUeXBlRXJyb3IoJ0V4cGVjdGVkIG5hbWUgdG8gYmUgYSBzdHJpbmcnKTtcblx0XHR9XG5cblx0XHRpZiAoIWZuIHx8IHR5cGVvZiBmbiAhPT0gJ2Z1bmN0aW9uJykge1xuXHRcdFx0dGhyb3cgbmV3IFR5cGVFcnJvcignRXhwZWN0ZWQgZm4gdG8gYmUgYSBmdW5jdGlvbicpO1xuXHRcdH1cblxuXHRcdHRoaXMuX3RoZW1lc1tuYW1lXSA9IGZuLmJpbmQodGhpcyk7XG5cblx0XHRyZXR1cm4gdGhpcztcblx0fVxuXG5cdC8qKlxuXHQgKiBSZWdpc3RlcnMgYSBuZXcgbG9nIHR5cGUuXG5cdCAqXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSBuYW1lIC0gVGhlIGxvZyB0eXBlIG5hbWUuXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0c10gLSBWYXJpb3VzIG9wdGlvbnMuXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSBbb3B0cy5zdHlsZV0gLSBUaGUgY29sb3IgdG8gYXNzb2NpYXRlIHdpdGggdGhpcyB0eXBlLlxuXHQgKiBAcGFyYW0ge1N0cmluZ30gW29wdHMubGFiZWxdIC0gVGhlIGxhYmVsIHRvIGRpc3BsYXkgd2hlbiBwcmludCB0aGlzIHR5cGUgb2YgbG9nIG1lc3NhZ2UuXG5cdCAqIEBwYXJhbSB7TnVtYmVyfSBbb3B0cy5mZF0gLSBUaGUgZmlsZSBkZXNjcmlwdG9yLiBVc2UgYDBgIGZvciBzdGRvdXQgYW5kIGAxYCBmb3Igc3RkZXJyLlxuXHQgKiBAcmV0dXJucyB7U25vb3BMb2dnfVxuXHQgKiBAYWNjZXNzIHB1YmxpY1xuXHQgKi9cblx0dHlwZShuYW1lLCBvcHRzID0ge30pIHtcblx0XHRpZiAoIW5hbWUgfHwgdHlwZW9mIG5hbWUgIT09ICdzdHJpbmcnKSB7XG5cdFx0XHR0aHJvdyBuZXcgVHlwZUVycm9yKCdFeHBlY3RlZCBuYW1lIHRvIGJlIGEgbm9uLWVtcHR5IHN0cmluZycpO1xuXHRcdH1cblxuXHRcdGlmICghb3B0cyB8fCB0eXBlb2Ygb3B0cyAhPT0gJ29iamVjdCcpIHtcblx0XHRcdHRocm93IG5ldyBUeXBlRXJyb3IoJ0V4cGVjdGVkIG9wdHMgdG8gYmUgYW4gb2JqZWN0Jyk7XG5cdFx0fVxuXG5cdFx0Y29uc3QgdHlwZSA9IHRoaXMuX3R5cGVzW25hbWVdID0ge1xuXHRcdFx0dHlwZTogICAgICBuYW1lLFxuXHRcdFx0dHlwZVN0eWxlOiBvcHRzLnN0eWxlLFxuXHRcdFx0dHlwZUxhYmVsOiBvcHRzLmxhYmVsICE9PSB1bmRlZmluZWQgPyBvcHRzLmxhYmVsIDogbmFtZSxcblx0XHRcdGZkOiAgICAgICAgb3B0cy5mZCB8fCAwXG5cdFx0fTtcblxuXHRcdGlmICghT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0aGlzLnByb3RvLCBuYW1lKSkge1xuXHRcdFx0Ly8gd2lyZSB1cCB0aGUgYWN0dWFsIGxvZyB0eXBlIGZ1bmN0aW9uXG5cdFx0XHQvLyBub3RlOiB0aGlzIGhhcyB0byB1c2UgYSBnZXR0ZXIgc28gdGhhdCBgdGhpc2AgY2FuIGJlIHJlc29sdmVkIGF0XG5cdFx0XHQvLyBydW50aW1lIGJlY2F1c2UgaWYgeW91IGBpbXBvcnQgeyBpbmZvIH0gZnJvbSAnU25vb3BMb2dnJ2AsIGBpbmZvKClgXG5cdFx0XHQvLyBnZXRzIGZvcmNlZCBpbnRvIHRoZSBnbG9iYWwgY29udGV4dC5cblx0XHRcdGNvbnN0IHJvb3QgPSB0aGlzO1xuXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMucHJvdG8sIG5hbWUsIHtcblx0XHRcdFx0Y29uZmlndXJhYmxlOiB0cnVlLFxuXHRcdFx0XHRlbnVtZXJhYmxlOiB0cnVlLFxuXHRcdFx0XHR2YWx1ZSguLi5hcmdzKSB7XG5cdFx0XHRcdFx0cm9vdC5kaXNwYXRjaCh7XG5cdFx0XHRcdFx0XHRpZDogcm9vdC5faWQsXG5cdFx0XHRcdFx0XHRhcmdzOiB0eXBlb2Ygb3B0cy50cmFuc2Zvcm0gPT09ICdmdW5jdGlvbicgPyBvcHRzLnRyYW5zZm9ybShhcmdzKSA6IGFyZ3MsXG5cdFx0XHRcdFx0XHQuLi50eXBlLFxuXHRcdFx0XHRcdFx0bnM6IHRoaXMuX25hbWVzcGFjZSxcblx0XHRcdFx0XHRcdG5zU3R5bGU6IHRoaXMuX25hbWVzcGFjZVN0eWxlLFxuXHRcdFx0XHRcdFx0dHM6IG5ldyBEYXRlLFxuXHRcdFx0XHRcdFx0ZW5hYmxlZDogdGhpcy5lbmFibGVkXG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0cmV0dXJuIHRoaXM7XG5cdFx0XHRcdH1cblx0XHRcdH0pO1xuXHRcdH1cblxuXHRcdHJldHVybiB0aGlzO1xuXHR9XG5cblx0LyoqXG5cdCAqIFN0b3BzIHBpcGluZyBtZXNzYWdlcyB0byB0aGUgc3BlY2lmaWVkIHN0cmVhbS5cblx0ICpcblx0ICogQHBhcmFtIHtzdHJlYW0uV3JpdGFibGV9IHN0cmVhbSAtIFRoZSBzdHJlYW0gdG8gbm8gbG9uZ2VyIHBpcGUgbWVzc2FnZXMgdG8uXG5cdCAqIEByZXR1cm5zIHtTbm9vcExvZ2d9XG5cdCAqIEBhY2Nlc3MgcHVibGljXG5cdCAqL1xuXHR1bnBpcGUoc3RyZWFtKSB7XG5cdFx0aWYgKCFzdHJlYW0pIHtcblx0XHRcdHRocm93IG5ldyBUeXBlRXJyb3IoJ0ludmFsaWQgc3RyZWFtJyk7XG5cdFx0fVxuXG5cdFx0Zm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLl9zdHJlYW1zLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHRpZiAodGhpcy5fc3RyZWFtc1tpXS5zdHJlYW0gPT09IHN0cmVhbSkge1xuXHRcdFx0XHR0aGlzLl9zdHJlYW1zLnNwbGljZShpLS0sIDEpO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdHJldHVybiB0aGlzO1xuXHR9XG5cblx0LyoqXG5cdCAqIFN0b3BzIGxpc3RlbmVuaW5nIGZvciBldmVudHMgZnJvbSBvdGhlciBTbm9vcExvZ2cgaW5zdGFuY2VzLlxuXHQgKlxuXHQgKiBAcmV0dXJucyB7U25vb3BMb2dnfVxuXHQgKiBAYWNjZXNzIHB1YmxpY1xuXHQgKi9cblx0dW5zbm9vcCgpIHtcblx0XHRpZiAodGhpcy5vblNub29wTWVzc2FnZSkge1xuXHRcdFx0cHJvY2Vzcy5yZW1vdmVMaXN0ZW5lcignc25vb3Bsb2dnJywgdGhpcy5vblNub29wTWVzc2FnZSk7XG5cdFx0fVxuXHRcdHJldHVybiB0aGlzO1xuXHR9XG5cblx0LyoqXG5cdCAqIEFkZHMgYSBtaWRkbGV3YXJlIGZ1bmN0aW9uIHRvIHRoZSBtZXNzYWdlIGRpc3BhdGNoaW5nIHN5c3RlbS5cblx0ICpcblx0ICogQHBhcmFtIHtGdW5jdGlvbn0gbWlkZGxld2FyZSAtIEEgbWlkZGxld2FyZSBmdW5jdGlvbiB0byBhZGQgdG8gdGhlIGxpc3QuXG5cdCAqIEBwYXJhbSB7TnVtYmVyfSBbcHJpb3JpdHk9MF0gLSBUaGUgbWlkZGxld2FyZSBwcmlvcml0eS4gTmVnYXRpdmUgcHJpb3JpdHkgaXMgcnVuIGJlZm9yZVxuXHQgKiBwb3NpdGl2ZSB2YWx1ZXMuXG5cdCAqIEByZXR1cm5zIHtTbm9vcExvZ2d9XG5cdCAqIEBhY2Nlc3MgcHVibGljXG5cdCAqL1xuXHR1c2UobWlkZGxld2FyZSwgcHJpb3JpdHkgPSAwKSB7XG5cdFx0aWYgKHR5cGVvZiBtaWRkbGV3YXJlICE9PSAnZnVuY3Rpb24nKSB7XG5cdFx0XHR0aHJvdyBuZXcgVHlwZUVycm9yKCdFeHBlY3RlZCBtaWRkbGV3YXJlIHRvIGJlIGEgZnVuY3Rpb24nKTtcblx0XHR9XG5cblx0XHRpZiAodHlwZW9mIHByaW9yaXR5ICE9PSAnbnVtYmVyJykge1xuXHRcdFx0dGhyb3cgbmV3IFR5cGVFcnJvcignRXhwZWN0ZWQgcHJpb3JpdHkgdG8gYmUgYSBudW1iZXInKTtcblx0XHR9XG5cblx0XHR0aGlzLl9taWRkbGV3YXJlcy5wdXNoKHsgZm46IG1pZGRsZXdhcmUsIHByaW9yaXR5IH0pO1xuXHRcdHRoaXMuX21pZGRsZXdhcmVzLnNvcnQoKGEsIGIpID0+IGIucHJpb3JpdHkgLSBhLnByaW9yaXR5KTtcblxuXHRcdHJldHVybiB0aGlzO1xuXHR9XG59XG5cbi8qKlxuICogQXBwbGllcyB0aGUgZm9ybWF0dGVyIHRvIHRoZSBtZXNzYWdlIGFuZCByZXR1cm5zIHRoZSByZXN1bHRpbmcgc3RyaW5nLlxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBtc2cgLSBUaGUgbWVzc2FnZSBvYmplY3RcbiAqIEByZXR1cm5zIHtTdHJpbmd9XG4gKi9cbmZ1bmN0aW9uIGZvcm1hdChtc2cpIHtcblx0aWYgKG1zZyAmJiB0eXBlb2YgbXNnID09PSAnb2JqZWN0JyAmJiAhKG1zZyBpbnN0YW5jZW9mIEJ1ZmZlcikpIHtcblx0XHRpZiAodHlwZW9mIG1zZy5mb3JtYXR0ZXIgPT09ICdmdW5jdGlvbicpIHtcblx0XHRcdHJldHVybiBtc2cuZm9ybWF0dGVyKG1zZyk7XG5cdFx0fVxuXHRcdHJldHVybiB1dGlsLmZvcm1hdC5hcHBseShudWxsLCBtc2cuYXJncykgKyAnXFxuJztcblx0fVxuXHRyZXR1cm4gU3RyaW5nKG1zZyk7XG59XG5cbi8qKlxuICogQU5TSSBjb2xvciBzZXF1ZW5jZSByZWdleC5cbiAqIEB0eXBlIHtSZWdFeHB9XG4gKi9cbmNvbnN0IHBhdHRlcm4gPSBbXG5cdCdbXFxcXHUwMDFCXFxcXHUwMDlCXVtbXFxcXF0oKSM7P10qKD86KD86KD86W2EtekEtWlxcXFxkXSooPzo7W2EtekEtWlxcXFxkXSopKik/XFxcXHUwMDA3KScsXG5cdCcoPzooPzpcXFxcZHsxLDR9KD86O1xcXFxkezAsNH0pKik/W1xcXFxkQS1QUlpjZi1udHFyeT0+PH5dKSknXG5dLmpvaW4oJ3wnKTtcbmNvbnN0IHN0cmlwUmVnRXhwID0gbmV3IFJlZ0V4cChwYXR0ZXJuLCAnZycpO1xuXG4vKipcbiAqIFRyYW5zZm9ybSBzdHJlYW0gdGhhdCBzdHJpcHMgY29sb3JzIGZyb20gdGhlIGxvZ2dlciB0byB0aGUgbmV4dCBzdHJlYW0gaW4gdGhlXG4gKiBwaXBlLlxuICovXG5jbGFzcyBTdHJpcENvbG9ycyBleHRlbmRzIFRyYW5zZm9ybSB7XG5cdGNvbnN0cnVjdG9yKG9wdHMgPSB7fSkge1xuXHRcdG9wdHMub2JqZWN0TW9kZSA9IHRydWU7XG5cdFx0c3VwZXIob3B0cyk7XG5cdH1cblxuXHRfdHJhbnNmb3JtKG1zZywgZW5jLCBjYikge1xuXHRcdC8qIGlzdGFuYnVsIGlnbm9yZSBlbHNlICovXG5cdFx0aWYgKG1zZyAmJiB0eXBlb2YgbXNnID09PSAnb2JqZWN0JyAmJiAhKG1zZyBpbnN0YW5jZW9mIEJ1ZmZlcikpIHtcblx0XHRcdHRoaXMucHVzaChmb3JtYXQobXNnKS5yZXBsYWNlKHN0cmlwUmVnRXhwLCAnJykpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHR0aGlzLnB1c2gobXNnLnRvU3RyaW5nKCkucmVwbGFjZShzdHJpcFJlZ0V4cCwgJycpKTtcblx0XHR9XG5cdFx0Y2IoKTtcblx0fVxufVxuXG4vKipcbiAqIEhlbHBlciBzdHJlYW0gdGhhdCBjb252ZXJ0cyBhbmQgZm9ybWF0cyB0aGUgbWVzc2FnZSBvYmplY3QgdG8gYSBzdHJpbmcuIElmXG4gKiB0aGUgbWVzc2FnZSBoYXMgYWxyZWFkeSBiZWVuIGNvbnZlcnRlZCB0byBhIHN0cmluZywgdGhlbiB0aGlzIHNpbXBseSBwYXNzZXNcbiAqIHRoZSB0ZXh0IHRocm91Z2guXG4gKi9cbmNsYXNzIEZvcm1hdCBleHRlbmRzIFRyYW5zZm9ybSB7XG5cdGNvbnN0cnVjdG9yKG9wdHMgPSB7fSkge1xuXHRcdG9wdHMub2JqZWN0TW9kZSA9IHRydWU7XG5cdFx0c3VwZXIob3B0cyk7XG5cdH1cblxuXHRfdHJhbnNmb3JtKG1zZywgZW5jLCBjYikge1xuXHRcdC8qIGlzdGFuYnVsIGlnbm9yZSBlbHNlICovXG5cdFx0aWYgKG1zZyAmJiB0eXBlb2YgbXNnID09PSAnb2JqZWN0JyAmJiAhKG1zZyBpbnN0YW5jZW9mIEJ1ZmZlcikpIHtcblx0XHRcdHRoaXMucHVzaChmb3JtYXQobXNnKSk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdHRoaXMucHVzaChtc2cpO1xuXHRcdH1cblx0XHRjYigpO1xuXHR9XG59XG5cbi8qKlxuICogVGhlIGRlZmF1bHQgc3RyZWFtIHRoYXQgd3JpdGVzIGxvZyBtZXNzYWdlcyB0byBzdGRpby5cbiAqL1xuY2xhc3MgU3RkaW9TdHJlYW0gZXh0ZW5kcyBXcml0YWJsZSB7XG5cdGNvbnN0cnVjdG9yKG9wdHMgPSB7fSkge1xuXHRcdG9wdHMub2JqZWN0TW9kZSA9IHRydWU7XG5cdFx0c3VwZXIob3B0cyk7XG5cblx0XHRjb25zdCBzdGRvdXQgPSBvcHRzLnN0ZG91dCB8fCBwcm9jZXNzLnN0ZG91dDtcblx0XHRjb25zdCBzdGRlcnIgPSBvcHRzLnN0ZGVyciB8fCBwcm9jZXNzLnN0ZGVycjtcblxuXHRcdC8qIGlzdGFuYnVsIGlnbm9yZSBlbHNlICovXG5cdFx0aWYgKHN1cHBvcnRzQ29sb3IpIHtcblx0XHRcdHRoaXMuc3Rkb3V0ID0gc3Rkb3V0O1xuXHRcdFx0dGhpcy5zdGRlcnIgPSBzdGRlcnI7XG5cdFx0fSBlbHNlIHtcblx0XHRcdCh0aGlzLnN0ZG91dCA9IG5ldyBTdHJpcENvbG9ycykucGlwZShzdGRvdXQpO1xuXHRcdFx0KHRoaXMuc3RkZXJyID0gbmV3IFN0cmlwQ29sb3JzKS5waXBlKHN0ZGVycik7XG5cdFx0fVxuXHR9XG5cblx0X3dyaXRlKG1zZywgZW5jLCBjYikge1xuXHRcdC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG5cdFx0aWYgKG1zZyAmJiB0eXBlb2YgbXNnID09PSAnb2JqZWN0JyAmJiAhKG1zZyBpbnN0YW5jZW9mIEJ1ZmZlcikpIHtcblx0XHRcdGlmIChtc2cuZmQgPT09IDEpIHtcblx0XHRcdFx0dGhpcy5zdGRlcnIud3JpdGUoZm9ybWF0KG1zZykpO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0dGhpcy5zdGRvdXQud3JpdGUoZm9ybWF0KG1zZykpO1xuXHRcdFx0fVxuXHRcdH0gZWxzZSB7XG5cdFx0XHR0aGlzLnN0ZG91dC53cml0ZShTdHJpbmcobXNnKSk7XG5cdFx0fVxuXHRcdGNiKCk7XG5cdH1cbn1cblxuLyoqXG4gKiBBIHdyaXRhYmxlIHN0cmVhbSB0aGF0IHdpbGxcbiAqXG4gKiBAY2xhc3MgU3RkaW9EaXNwYXRjaGVyXG4gKiBAZXh0ZW5kcyB7V3JpdGFibGV9XG4gKi9cbmNsYXNzIFN0ZGlvRGlzcGF0Y2hlciBleHRlbmRzIFdyaXRhYmxlIHtcblx0Y29uc3RydWN0b3IobG9nZ2VyLCBwYXJhbXMpIHtcblx0XHRzdXBlcigpO1xuXHRcdHRoaXMubG9nZ2VyID0gbG9nZ2VyO1xuXHRcdHRoaXMucGFyYW1zID0gcGFyYW1zO1xuXHR9XG5cblx0X3dyaXRlKGRhdGEsIGVuYywgY2IpIHtcblx0XHRjb25zdCBvcmlnaW4gPSB0aGlzLmxvZ2dlci5fcm9vdCB8fCB0aGlzLmxvZ2dlcjtcblx0XHRvcmlnaW4uZGlzcGF0Y2goe1xuXHRcdFx0aWQ6ICAgICAgb3JpZ2luLl9pZCxcblx0XHRcdGFyZ3M6ICAgIFsgZGF0YS50b1N0cmluZygpLnJlcGxhY2UoLyhcXHJcXG58XFxuKSQvLCAnJykgXSxcblx0XHRcdHRzOiAgICAgIG5ldyBEYXRlLFxuXHRcdFx0Li4udGhpcy5wYXJhbXNcblx0XHR9KTtcblx0XHRjYigpO1xuXHR9XG59XG5cbi8qKlxuICogTG9vcHMgb3ZlciBhbiBgU25vb3BMb2dnYCBvciBgTG9nZ2VyYCBpbnN0YW5jZSdzIHByb3RvdHlwZSBjaGFpbiB1cCB0byB0aGUgYEZ1bmN0aW9uYXRvcmBcbiAqIHByb3RvdHlwZSB3aGlsZSBiaW5kaW5nIHRoZSBwcm90b3R5cGUgZnVuY3Rpb25zIGRpcmVjdGx5IHRvIHRoZSBpbnN0YW5jZSBvYmplY3Qgc28gdGhhdFxuICogdGhlIG1ldGhvZCdzIGNvbnRleHQgaXNuJ3QgbG9zdCBpZiB0aGUgbG9nIGZ1bmN0aW9ucyBhcmVuJ3QgZGVzdHJ1Y3R1cmVkLlxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBvYmogLSBUaGUgb2JqZWN0IGluc3RhbmNlIHRvIGJpbmQgbWV0aG9kcyB0by5cbiAqIEByZXR1cm5zIHtPYmplY3R9IFRoZSBvcmlnaW5hbCBvYmplY3QuXG4gKi9cbmZ1bmN0aW9uIGJpbmQob2JqKSB7XG5cdGZvciAobGV0IHByb3RvID0gb2JqLl9fcHJvdG9fXzsgcHJvdG87IHByb3RvID0gcHJvdG8uX19wcm90b19fKSB7XG5cdFx0Zm9yIChjb25zdCBwcm9wIG9mIE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKHByb3RvKSkge1xuXHRcdFx0bGV0IGRlc2MgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHByb3RvLCBwcm9wKTtcblxuXHRcdFx0aWYgKHByb3AgPT09ICdjb25zdHJ1Y3RvcicgfHwgIWRlc2MpIHtcblx0XHRcdFx0Y29udGludWU7XG5cdFx0XHR9IGVsc2UgaWYgKHR5cGVvZiBkZXNjLmdldCA9PT0gJ2Z1bmN0aW9uJykge1xuXHRcdFx0XHRkZXNjLmdldCA9IGRlc2MuZ2V0LmJpbmQob2JqKTtcblx0XHRcdH0gZWxzZSBpZiAodHlwZW9mIGRlc2MudmFsdWUgPT09ICdmdW5jdGlvbicpIHtcblx0XHRcdFx0ZGVzYy52YWx1ZSA9IGRlc2MudmFsdWUuYmluZChvYmopO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0Y29udGludWU7XG5cdFx0XHR9XG5cblx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvYmosIHByb3AsIGRlc2MpO1xuXHRcdH1cblxuXHRcdGlmIChwcm90by5jb25zdHJ1Y3Rvci5uYW1lID09PSAnRnVuY3Rpb25hdG9yJykge1xuXHRcdFx0YnJlYWs7XG5cdFx0fVxuXHR9XG5cdHJldHVybiBvYmo7XG59XG5cbi8qKlxuICogQ3JlYXRlcyBhIHNub29wbG9nZyBpbnN0YW5jZSB3aXRoIGEgYnVuY2ggb2YgZGVmYXVsdHMuXG4gKlxuICogQHJldHVybnMge1Nub29wTG9nZ31cbiAqL1xuZnVuY3Rpb24gY3JlYXRlSW5zdGFuY2VXaXRoRGVmYXVsdHMoKSB7XG5cdHJldHVybiBiaW5kKG5ldyBTbm9vcExvZ2coKVxuXHRcdC50eXBlKCdsb2cnLCAgIHsgc3R5bGU6ICdncmF5JywgbGFiZWw6IG51bGwgfSlcblx0XHQudHlwZSgndHJhY2UnLCB7XG5cdFx0XHRzdHlsZTogJ2dyYXknLFxuXHRcdFx0dHJhbnNmb3JtKGFyZ3MpIHtcblx0XHRcdFx0Y29uc3QgZXJyID0ge1xuXHRcdFx0XHRcdG5hbWU6ICAgICdUcmFjZScsXG5cdFx0XHRcdFx0bWVzc2FnZTogdXRpbC5mb3JtYXQuYXBwbHkobnVsbCwgYXJncylcblx0XHRcdFx0fTtcblx0XHRcdFx0RXJyb3IuY2FwdHVyZVN0YWNrVHJhY2UoZXJyKTtcblxuXHRcdFx0XHQvLyBubyBzZW5zZSBsZWF2aW5nIHRoaXMgZnVuY3Rpb24gaW4gdGhlIHN0YWNrXG5cdFx0XHRcdHJldHVybiBbIGAke2Vyci5uYW1lfSR7ZXJyLm1lc3NhZ2UgPyBgOiAke2Vyci5tZXNzYWdlfWAgOiAnJ31cXG4ke2Vyci5zdGFjay5zcGxpdCgnXFxuJykuc2xpY2UoMykuam9pbignXFxuJyl9YCBdO1xuXHRcdFx0fVxuXHRcdH0pXG5cdFx0LnR5cGUoJ2RlYnVnJywgeyBzdHlsZTogJ21hZ2VudGEnIH0pXG5cdFx0LnR5cGUoJ2luZm8nLCAgeyBzdHlsZTogJ2dyZWVuJyB9KVxuXHRcdC50eXBlKCd3YXJuJywgIHsgc3R5bGU6ICd5ZWxsb3cnLCAgICAgIGZkOiAxIH0pXG5cdFx0LnR5cGUoJ2Vycm9yJywgeyBzdHlsZTogJ3JlZCcsICAgICAgICAgZmQ6IDEgfSlcblx0XHQudHlwZSgnZmF0YWwnLCB7IHN0eWxlOiAnd2hpdGUsYmdSZWQnLCBmZDogMSB9KVxuXG5cdFx0LnN0eWxlKCdib2xkJywgICAgICAgICAgY2hhbGsuYm9sZClcblx0XHQuc3R5bGUoJ2RpbScsICAgICAgICAgICBjaGFsay5kaW0pXG5cdFx0LnN0eWxlKCdpdGFsaWMnLCAgICAgICAgY2hhbGsuaXRhbGljKVxuXHRcdC5zdHlsZSgndW5kZXJsaW5lJywgICAgIGNoYWxrLnVuZGVybGluZSlcblx0XHQuc3R5bGUoJ2ludmVyc2UnLCAgICAgICBjaGFsay5pbnZlcnNlKVxuXHRcdC5zdHlsZSgnaGlkZGVuJywgICAgICAgIGNoYWxrLmhpZGRlbilcblx0XHQuc3R5bGUoJ3N0cmlrZXRocm91Z2gnLCBjaGFsay5zdHJpa2V0aHJvdWdoKVxuXG5cdFx0LnN0eWxlKCdibGFjaycsICAgICAgICAgY2hhbGsuYmxhY2spXG5cdFx0LnN0eWxlKCdyZWQnLCAgICAgICAgICAgY2hhbGsucmVkKVxuXHRcdC5zdHlsZSgnYmxhY2snLCAgICAgICAgIGNoYWxrLmJsYWNrKVxuXHRcdC5zdHlsZSgnZ3JlZW4nLCAgICAgICAgIGNoYWxrLmdyZWVuKVxuXHRcdC5zdHlsZSgneWVsbG93JywgICAgICAgIGNoYWxrLnllbGxvdylcblx0XHQuc3R5bGUoJ2JsdWUnLCAgICAgICAgICBjaGFsay5ibHVlKVxuXHRcdC5zdHlsZSgnbWFnZW50YScsICAgICAgIGNoYWxrLm1hZ2VudGEpXG5cdFx0LnN0eWxlKCdjeWFuJywgICAgICAgICAgY2hhbGsuY3lhbilcblx0XHQuc3R5bGUoJ3doaXRlJywgICAgICAgICBjaGFsay53aGl0ZSlcblx0XHQuc3R5bGUoJ2dyYXknLCAgICAgICAgICBjaGFsay5ncmF5KVxuXG5cdFx0LnN0eWxlKCdiZ0JsYWNrJywgICAgICAgY2hhbGsuYmdCbGFjaylcblx0XHQuc3R5bGUoJ2JnUmVkJywgICAgICAgICBjaGFsay5iZ1JlZClcblx0XHQuc3R5bGUoJ2JnR3JlZW4nLCAgICAgICBjaGFsay5iZ0dyZWVuKVxuXHRcdC5zdHlsZSgnYmdZZWxsb3cnLCAgICAgIGNoYWxrLmJnWWVsbG93KVxuXHRcdC5zdHlsZSgnYmdCbHVlJywgICAgICAgIGNoYWxrLmJnQmx1ZSlcblx0XHQuc3R5bGUoJ2JnTWFnZW50YScsICAgICBjaGFsay5iZ01hZ2VudGEpXG5cdFx0LnN0eWxlKCdiZ0N5YW4nLCAgICAgICAgY2hhbGsuYmdDeWFuKVxuXHRcdC5zdHlsZSgnYmdXaGl0ZScsICAgICAgIGNoYWxrLmJnV2hpdGUpXG5cblx0XHQuc3R5bGUoJ3VwcGVyY2FzZScsICAgICBzID0+IFN0cmluZyhzKS50b1VwcGVyQ2FzZSgpKVxuXHRcdC5zdHlsZSgnbG93ZXJjYXNlJywgICAgIHMgPT4gU3RyaW5nKHMpLnRvTG93ZXJDYXNlKCkpXG5cdFx0LnN0eWxlKCdicmFja2V0JywgICAgICAgcyA9PiBgWyR7c31dYClcblx0XHQuc3R5bGUoJ3BhcmVuJywgICAgICAgICBzID0+IGAoJHtzfSlgKVxuXG5cdFx0LnN0eWxlKCdoaWdobGlnaHQnLCAgICAgY2hhbGsuY3lhbilcblx0XHQuc3R5bGUoJ2xvd2xpZ2h0JywgICAgICBjaGFsay5ibHVlKVxuXHRcdC5zdHlsZSgnb2snLCAgICAgICAgICAgIGNoYWxrLmdyZWVuKVxuXHRcdC5zdHlsZSgnbm90aWNlJywgICAgICAgIGNoYWxrLnllbGxvdylcblx0XHQuc3R5bGUoJ2FsZXJ0JywgICAgICAgICBjaGFsay5yZWQpXG5cdFx0LnN0eWxlKCdub3RlJywgICAgICAgICAgY2hhbGsuZ3JheSlcblxuXHRcdC5zdHlsZSgnYXV0bycsIGZ1bmN0aW9uICh0ZXh0KSB7XG5cdFx0XHRsZXQgaGFzaCA9IDA7XG5cdFx0XHRmb3IgKGNvbnN0IGkgaW4gdGV4dCkge1xuXHRcdFx0XHRoYXNoID0gKCgoaGFzaCA8PCA1KSAtIGhhc2gpICsgdGV4dC5jaGFyQ29kZUF0KGkpKSB8IDA7XG5cdFx0XHR9XG5cdFx0XHRoYXNoID0gTWF0aC5hYnMoaGFzaCk7XG5cblx0XHRcdC8vIGNoZWNrIHRoZSBjYWNoZSBmaXJzdFxuXHRcdFx0bGV0IGNvbG9yID0gdGhpcy5fYXV0b0NhY2hlW2hhc2hdO1xuXG5cdFx0XHRpZiAoIWNvbG9yKSB7XG5cdFx0XHRcdC8vIG5vIGNhY2hlLCBkbyB3ZSBoYXZlIGEgbGlzdCBvZiB2YWxpZCBjb2xvcnM/XG5cdFx0XHRcdGxldCBjb2xvcnMgPSB0aGlzLl9jb2xvcnM7XG5cblx0XHRcdFx0aWYgKGNvbG9ycyAmJiBjb2xvcnMubGVuZ3RoKSB7XG5cdFx0XHRcdFx0Ly8geWVzLCBwaWNrIGZyb20gdGhlIGxpc3Qgb2YgY29sb3JzXG5cdFx0XHRcdFx0Y29sb3IgPSB0aGlzLl9hdXRvQ2FjaGVbaGFzaF0gPSBjb2xvcnNbaGFzaCAlIGNvbG9ycy5sZW5ndGhdO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdC8vIG5vIGxpc3QsIHBpY2sgYSBicmlnaHRuZXNzIGFuZCB0aGVuIGxvYWQgdGhlIGxvb2t1cCB0YWJsZSBhbmQgcGljayBhIGNvbG9yXG5cdFx0XHRcdFx0Y29uc3QgYnJpZ2h0bmVzcyA9IChoYXNoICUgTWF0aC5tYXgoMSwgdGhpcy5fbWF4QnJpZ2h0bmVzcyAtIHRoaXMuX21pbkJyaWdodG5lc3MpKSArIHRoaXMuX21pbkJyaWdodG5lc3M7XG5cdFx0XHRcdFx0Y29uc3QgeyBjb3VudCwgZ2V0Q29sb3IgfSA9IGJyeXQuZ2V0QnJpZ2h0bmVzcyhicmlnaHRuZXNzKTtcblxuXHRcdFx0XHRcdC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuXHRcdFx0XHRcdGlmICghY291bnQpIHtcblx0XHRcdFx0XHRcdC8vIHRoaXMgc2hvdWxkIG5ldmVyIGhhcHBlblxuXHRcdFx0XHRcdFx0cmV0dXJuIHRleHQ7XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0Y29sb3IgPSB0aGlzLl9hdXRvQ2FjaGVbaGFzaF0gPSBicnl0LnRvUkdCKGdldENvbG9yKGhhc2ggJSBjb3VudCkpO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cblx0XHRcdGlmIChBcnJheS5pc0FycmF5KGNvbG9yKSkge1xuXHRcdFx0XHRyZXR1cm4gY2hhbGsucmdiLmFwcGx5KGNoYWxrLCBjb2xvcikodGV4dCk7XG5cdFx0XHR9XG5cblx0XHRcdHJldHVybiB0aGlzLnN0eWxlc1tjb2xvcl0odGV4dCk7XG5cdFx0fSlcblxuXHRcdC50aGVtZSgnZGV0YWlsZWQnLCBmdW5jdGlvbiAobXNnKSB7XG5cdFx0XHRjb25zdCBucyA9IHRoaXMuYXBwbHlTdHlsZShtc2cubnNTdHlsZSB8fCAnYXV0bycsIG1zZy5ucyk7XG5cdFx0XHRjb25zdCB0eXBlID0gdGhpcy5hcHBseVN0eWxlKG1zZy50eXBlU3R5bGUsIG1zZy50eXBlTGFiZWwpO1xuXHRcdFx0Y29uc3QgdHMgPSBtc2cudHMgaW5zdGFuY2VvZiBEYXRlID8gbXNnLnRzIDogbmV3IERhdGUobXNnLnRzKTtcblx0XHRcdGNvbnN0IHByZWZpeCA9IHRoaXMuYXBwbHlTdHlsZSgnbWFnZW50YScsIHRzLnRvSVNPU3RyaW5nKCkpICsgJyAnICsgKG5zID8gbnMgKyAnICcgOiAnJykgKyAodHlwZSA/IHR5cGUgKyAnICcgOiAnJyk7XG5cdFx0XHRjb25zdCBhcmdzID0gdGhpcy5faW5zcGVjdE9wdGlvbnMgPyBtc2cuYXJncy5tYXAoaXQgPT4gaXNKU09OKGl0KSA/IHV0aWwuaW5zcGVjdChpdCwgdGhpcy5faW5zcGVjdE9wdGlvbnMpIDogaXQpIDogbXNnLmFyZ3M7XG5cdFx0XHRjb25zdCByZXN1bHQgPSB1dGlsLmZvcm1hdC5hcHBseShudWxsLCBhcmdzKTtcblx0XHRcdHJldHVybiBgJHtwcmVmaXggPyByZXN1bHQuc3BsaXQoJ1xcbicpLm1hcChzID0+IHByZWZpeCArIHMpLmpvaW4oJ1xcbicpIDogcmVzdWx0fVxcbmA7XG5cdFx0fSlcblx0XHQudGhlbWUoJ3N0YW5kYXJkJywgZnVuY3Rpb24gKG1zZykge1xuXHRcdFx0Y29uc3QgbnMgPSB0aGlzLmFwcGx5U3R5bGUobXNnLm5zU3R5bGUgfHwgJ2F1dG8nLCBtc2cubnMpO1xuXHRcdFx0Y29uc3QgdHlwZSA9IHRoaXMuYXBwbHlTdHlsZShtc2cudHlwZVN0eWxlLCBtc2cudHlwZUxhYmVsKTtcblx0XHRcdGNvbnN0IHByZWZpeCA9IChucyA/IG5zICsgJyAnIDogJycpICsgKHR5cGUgPyB0eXBlICsgJyAnIDogJycpO1xuXHRcdFx0Y29uc3QgYXJncyA9IHRoaXMuX2luc3BlY3RPcHRpb25zID8gbXNnLmFyZ3MubWFwKGl0ID0+IGlzSlNPTihpdCkgPyB1dGlsLmluc3BlY3QoaXQsIHRoaXMuX2luc3BlY3RPcHRpb25zKSA6IGl0KSA6IG1zZy5hcmdzO1xuXHRcdFx0Y29uc3QgcmVzdWx0ID0gdXRpbC5mb3JtYXQuYXBwbHkobnVsbCwgYXJncyk7XG5cdFx0XHRyZXR1cm4gYCR7cHJlZml4ID8gcmVzdWx0LnNwbGl0KCdcXG4nKS5tYXAocyA9PiBwcmVmaXggKyBzKS5qb2luKCdcXG4nKSA6IHJlc3VsdH1cXG5gO1xuXHRcdH0pXG5cdFx0LnRoZW1lKCdtaW5pbWFsJywgZnVuY3Rpb24gKG1zZykge1xuXHRcdFx0Y29uc3QgYXJncyA9IHRoaXMuX2luc3BlY3RPcHRpb25zID8gbXNnLmFyZ3MubWFwKGl0ID0+IGlzSlNPTihpdCkgPyB1dGlsLmluc3BlY3QoaXQsIHRoaXMuX2luc3BlY3RPcHRpb25zKSA6IGl0KSA6IG1zZy5hcmdzO1xuXHRcdFx0cmV0dXJuIGAke3V0aWwuZm9ybWF0LmFwcGx5KG51bGwsIGFyZ3MpfVxcbmA7XG5cdFx0fSlcblx0KTtcbn1cblxuLyoqXG4gKiBDaGVja3MgaWYgYSB2YXJpYWJsZSBpcyBhIEpTT04gY29tcGF0aWJsZSBvYmplY3QuXG4gKlxuICogQHBhcmFtIHsqfSBpdCAtIFRoZSB2YWx1ZSB0byBjaGVjay5cbiAqIEByZXR1cm5zIHtCb29sZWFufVxuICovXG5mdW5jdGlvbiBpc0pTT04oaXQpIHtcblx0aWYgKGl0ID09PSBudWxsIHx8IHR5cGVvZiBpdCAhPT0gJ29iamVjdCcpIHtcblx0XHRyZXR1cm4gZmFsc2U7XG5cdH1cblx0Y29uc3QgcHJvdG8gPSBPYmplY3QuZ2V0UHJvdG90eXBlT2YoaXQpO1xuXHRyZXR1cm4gcHJvdG8gJiYgcHJvdG8uY29uc3RydWN0b3IgJiYgcHJvdG8uY29uc3RydWN0b3IubmFtZSA9PT0gJ09iamVjdCc7XG59XG5cbi8vIGNyZWF0ZSB0aGUgZ2xvYmFsIGluc3RhbmNlIGFuZCB3aXJlIHVwIHRoZSBidWlsdC1pbiB0eXBlc1xuY29uc3QgaW5zdGFuY2UgPSBjcmVhdGVJbnN0YW5jZVdpdGhEZWZhdWx0cygpXG5cdC5lbmFibGUocHJvY2Vzcy5lbnYuU05PT1BMT0dHIHx8IHByb2Nlc3MuZW52LkRFQlVHKVxuXHQucGlwZShuZXcgU3RkaW9TdHJlYW0sIHsgZmx1c2g6IHRydWUgfSk7XG5cbmV4cG9ydCBkZWZhdWx0IGluc3RhbmNlO1xuXG5leHBvcnQge1xuXHRjcmVhdGVJbnN0YW5jZVdpdGhEZWZhdWx0cyxcblx0Rm9ybWF0LFxuXHRMb2dnZXIsXG5cdFNub29wTG9nZyxcblx0U3RkaW9TdHJlYW0sXG5cdFN0cmlwQ29sb3JzXG59O1xuIl0sImZpbGUiOiJpbmRleC5qcyJ9
